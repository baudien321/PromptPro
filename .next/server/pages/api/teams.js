"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/teams";
exports.ids = ["pages/api/teams"];
exports.modules = {

/***/ "(api-node)/./lib/auth.js":
/*!*********************!*\
  !*** ./lib/auth.js ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getAuthSession: () => (/* binding */ getAuthSession),\n/* harmony export */   withAuth: () => (/* binding */ withAuth),\n/* harmony export */   withAuthForMethods: () => (/* binding */ withAuthForMethods)\n/* harmony export */ });\n/* harmony import */ var next_auth_jwt__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/jwt */ \"next-auth/jwt\");\n/* harmony import */ var next_auth_jwt__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth_jwt__WEBPACK_IMPORTED_MODULE_0__);\n\n/**\r\n * Check if the request is authenticated\r\n * @param {Object} req - The request object\r\n * @returns {Promise<Object|null>} - The user session or null if not authenticated\r\n */ async function getAuthSession(req) {\n    return await (0,next_auth_jwt__WEBPACK_IMPORTED_MODULE_0__.getToken)({\n        req,\n        secret: process.env.NEXTAUTH_SECRET\n    });\n}\n/**\r\n * Higher-order function that creates an API handler that requires authentication\r\n * @param {Function} handler - The API handler to protect\r\n * @returns {Function} - The protected API handler\r\n */ function withAuth(handler) {\n    return async (req, res)=>{\n        const session = await getAuthSession(req);\n        if (!session) {\n            return res.status(401).json({\n                error: \"Unauthorized\"\n            });\n        }\n        // Add the session to the request object\n        req.session = session;\n        // Also add a user property for compatibility\n        req.user = {\n            id: session.sub || session.id,\n            name: session.name,\n            email: session.email\n        };\n        // Call the original handler\n        return handler(req, res);\n    };\n}\n/**\r\n * Higher-order function that optionally requires authentication for certain methods\r\n * @param {Function} handler - The API handler \r\n * @param {Array} protectedMethods - HTTP methods that require authentication (e.g., ['POST', 'PUT', 'DELETE'])\r\n * @returns {Function} - The conditionally protected API handler\r\n */ function withAuthForMethods(handler, protectedMethods = [\n    'POST',\n    'PUT',\n    'DELETE'\n]) {\n    return async (req, res)=>{\n        // Check if the current method requires authentication\n        if (protectedMethods.includes(req.method)) {\n            const session = await getAuthSession(req);\n            if (!session) {\n                return res.status(401).json({\n                    error: \"Unauthorized\"\n                });\n            }\n            // Add the session to the request object\n            req.session = session;\n            // Also add a user property for compatibility\n            req.user = {\n                id: session.sub || session.id,\n                name: session.name,\n                email: session.email\n            };\n        }\n        // Call the original handler\n        return handler(req, res);\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL2xpYi9hdXRoLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXlDO0FBRXpDOzs7O0NBSUMsR0FDTSxlQUFlQyxlQUFlQyxHQUFHO0lBQ3RDLE9BQU8sTUFBTUYsdURBQVFBLENBQUM7UUFBRUU7UUFBS0MsUUFBUUMsUUFBUUMsR0FBRyxDQUFDQyxlQUFlO0lBQUM7QUFDbkU7QUFFQTs7OztDQUlDLEdBQ00sU0FBU0MsU0FBU0MsT0FBTztJQUM5QixPQUFPLE9BQU9OLEtBQUtPO1FBQ2pCLE1BQU1DLFVBQVUsTUFBTVQsZUFBZUM7UUFFckMsSUFBSSxDQUFDUSxTQUFTO1lBQ1osT0FBT0QsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsT0FBTztZQUFlO1FBQ3REO1FBRUEsd0NBQXdDO1FBQ3hDWCxJQUFJUSxPQUFPLEdBQUdBO1FBRWQsNkNBQTZDO1FBQzdDUixJQUFJWSxJQUFJLEdBQUc7WUFDVEMsSUFBSUwsUUFBUU0sR0FBRyxJQUFJTixRQUFRSyxFQUFFO1lBQzdCRSxNQUFNUCxRQUFRTyxJQUFJO1lBQ2xCQyxPQUFPUixRQUFRUSxLQUFLO1FBQ3RCO1FBRUEsNEJBQTRCO1FBQzVCLE9BQU9WLFFBQVFOLEtBQUtPO0lBQ3RCO0FBQ0Y7QUFFQTs7Ozs7Q0FLQyxHQUNNLFNBQVNVLG1CQUFtQlgsT0FBTyxFQUFFWSxtQkFBbUI7SUFBQztJQUFRO0lBQU87Q0FBUztJQUN0RixPQUFPLE9BQU9sQixLQUFLTztRQUNqQixzREFBc0Q7UUFDdEQsSUFBSVcsaUJBQWlCQyxRQUFRLENBQUNuQixJQUFJb0IsTUFBTSxHQUFHO1lBQ3pDLE1BQU1aLFVBQVUsTUFBTVQsZUFBZUM7WUFFckMsSUFBSSxDQUFDUSxTQUFTO2dCQUNaLE9BQU9ELElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7b0JBQUVDLE9BQU87Z0JBQWU7WUFDdEQ7WUFFQSx3Q0FBd0M7WUFDeENYLElBQUlRLE9BQU8sR0FBR0E7WUFFZCw2Q0FBNkM7WUFDN0NSLElBQUlZLElBQUksR0FBRztnQkFDVEMsSUFBSUwsUUFBUU0sR0FBRyxJQUFJTixRQUFRSyxFQUFFO2dCQUM3QkUsTUFBTVAsUUFBUU8sSUFBSTtnQkFDbEJDLE9BQU9SLFFBQVFRLEtBQUs7WUFDdEI7UUFDRjtRQUVBLDRCQUE0QjtRQUM1QixPQUFPVixRQUFRTixLQUFLTztJQUN0QjtBQUNGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGJhdWRpXFxPbmVEcml2ZVxcRGVza3RvcFxcUHJvbXB0UHJvXFxQcm9tcHRQcm9cXGxpYlxcYXV0aC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRUb2tlbiB9IGZyb20gXCJuZXh0LWF1dGgvand0XCI7XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgdGhlIHJlcXVlc3QgaXMgYXV0aGVudGljYXRlZFxyXG4gKiBAcGFyYW0ge09iamVjdH0gcmVxIC0gVGhlIHJlcXVlc3Qgb2JqZWN0XHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdHxudWxsPn0gLSBUaGUgdXNlciBzZXNzaW9uIG9yIG51bGwgaWYgbm90IGF1dGhlbnRpY2F0ZWRcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBdXRoU2Vzc2lvbihyZXEpIHtcclxuICByZXR1cm4gYXdhaXQgZ2V0VG9rZW4oeyByZXEsIHNlY3JldDogcHJvY2Vzcy5lbnYuTkVYVEFVVEhfU0VDUkVUIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogSGlnaGVyLW9yZGVyIGZ1bmN0aW9uIHRoYXQgY3JlYXRlcyBhbiBBUEkgaGFuZGxlciB0aGF0IHJlcXVpcmVzIGF1dGhlbnRpY2F0aW9uXHJcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXIgLSBUaGUgQVBJIGhhbmRsZXIgdG8gcHJvdGVjdFxyXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IC0gVGhlIHByb3RlY3RlZCBBUEkgaGFuZGxlclxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHdpdGhBdXRoKGhhbmRsZXIpIHtcclxuICByZXR1cm4gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0QXV0aFNlc3Npb24ocmVxKTtcclxuICAgIFxyXG4gICAgaWYgKCFzZXNzaW9uKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiBcIlVuYXV0aG9yaXplZFwiIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBBZGQgdGhlIHNlc3Npb24gdG8gdGhlIHJlcXVlc3Qgb2JqZWN0XHJcbiAgICByZXEuc2Vzc2lvbiA9IHNlc3Npb247XHJcbiAgICBcclxuICAgIC8vIEFsc28gYWRkIGEgdXNlciBwcm9wZXJ0eSBmb3IgY29tcGF0aWJpbGl0eVxyXG4gICAgcmVxLnVzZXIgPSB7XHJcbiAgICAgIGlkOiBzZXNzaW9uLnN1YiB8fCBzZXNzaW9uLmlkLFxyXG4gICAgICBuYW1lOiBzZXNzaW9uLm5hbWUsXHJcbiAgICAgIGVtYWlsOiBzZXNzaW9uLmVtYWlsXHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICAvLyBDYWxsIHRoZSBvcmlnaW5hbCBoYW5kbGVyXHJcbiAgICByZXR1cm4gaGFuZGxlcihyZXEsIHJlcyk7XHJcbiAgfTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEhpZ2hlci1vcmRlciBmdW5jdGlvbiB0aGF0IG9wdGlvbmFsbHkgcmVxdWlyZXMgYXV0aGVudGljYXRpb24gZm9yIGNlcnRhaW4gbWV0aG9kc1xyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyIC0gVGhlIEFQSSBoYW5kbGVyIFxyXG4gKiBAcGFyYW0ge0FycmF5fSBwcm90ZWN0ZWRNZXRob2RzIC0gSFRUUCBtZXRob2RzIHRoYXQgcmVxdWlyZSBhdXRoZW50aWNhdGlvbiAoZS5nLiwgWydQT1NUJywgJ1BVVCcsICdERUxFVEUnXSlcclxuICogQHJldHVybnMge0Z1bmN0aW9ufSAtIFRoZSBjb25kaXRpb25hbGx5IHByb3RlY3RlZCBBUEkgaGFuZGxlclxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHdpdGhBdXRoRm9yTWV0aG9kcyhoYW5kbGVyLCBwcm90ZWN0ZWRNZXRob2RzID0gWydQT1NUJywgJ1BVVCcsICdERUxFVEUnXSkge1xyXG4gIHJldHVybiBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIC8vIENoZWNrIGlmIHRoZSBjdXJyZW50IG1ldGhvZCByZXF1aXJlcyBhdXRoZW50aWNhdGlvblxyXG4gICAgaWYgKHByb3RlY3RlZE1ldGhvZHMuaW5jbHVkZXMocmVxLm1ldGhvZCkpIHtcclxuICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldEF1dGhTZXNzaW9uKHJlcSk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAoIXNlc3Npb24pIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogXCJVbmF1dGhvcml6ZWRcIiB9KTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8gQWRkIHRoZSBzZXNzaW9uIHRvIHRoZSByZXF1ZXN0IG9iamVjdFxyXG4gICAgICByZXEuc2Vzc2lvbiA9IHNlc3Npb247XHJcbiAgICAgIFxyXG4gICAgICAvLyBBbHNvIGFkZCBhIHVzZXIgcHJvcGVydHkgZm9yIGNvbXBhdGliaWxpdHlcclxuICAgICAgcmVxLnVzZXIgPSB7XHJcbiAgICAgICAgaWQ6IHNlc3Npb24uc3ViIHx8IHNlc3Npb24uaWQsXHJcbiAgICAgICAgbmFtZTogc2Vzc2lvbi5uYW1lLFxyXG4gICAgICAgIGVtYWlsOiBzZXNzaW9uLmVtYWlsXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIENhbGwgdGhlIG9yaWdpbmFsIGhhbmRsZXJcclxuICAgIHJldHVybiBoYW5kbGVyKHJlcSwgcmVzKTtcclxuICB9O1xyXG59Il0sIm5hbWVzIjpbImdldFRva2VuIiwiZ2V0QXV0aFNlc3Npb24iLCJyZXEiLCJzZWNyZXQiLCJwcm9jZXNzIiwiZW52IiwiTkVYVEFVVEhfU0VDUkVUIiwid2l0aEF1dGgiLCJoYW5kbGVyIiwicmVzIiwic2Vzc2lvbiIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsInVzZXIiLCJpZCIsInN1YiIsIm5hbWUiLCJlbWFpbCIsIndpdGhBdXRoRm9yTWV0aG9kcyIsInByb3RlY3RlZE1ldGhvZHMiLCJpbmNsdWRlcyIsIm1ldGhvZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./lib/auth.js\n");

/***/ }),

/***/ "(api-node)/./lib/mongoose.js":
/*!*************************!*\
  !*** ./lib/mongoose.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\n// Cache the connection promise to avoid reconnecting on every call\nlet connectionPromise = null;\nconst connectDB = async ()=>{\n    // If a connection promise exists, return it to reuse the connection\n    if (connectionPromise) {\n        // console.log(\"Using cached Mongoose connection\");\n        return connectionPromise;\n    }\n    // Check for MongoDB URI environment variable\n    if (!process.env.MONGODB_URI) {\n        throw new Error('Please define the MONGODB_URI environment variable inside .env.local');\n    }\n    // Create a new connection promise\n    console.log(\"Creating new Mongoose connection...\");\n    connectionPromise = mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(process.env.MONGODB_URI, {\n        dbName: process.env.MONGODB_DB || 'PromptPro',\n        // Recommended options (check Mongoose docs for latest)\n        useNewUrlParser: true,\n        useUnifiedTopology: true\n    }).then((mongooseInstance)=>{\n        console.log(\"Mongoose connected successfully.\");\n        return mongooseInstance; // The resolved value of the promise\n    }).catch((err)=>{\n        console.error(\"Mongoose connection error:\", err);\n        connectionPromise = null; // Reset promise on error so retry is possible\n        throw err; // Re-throw error to be caught by the calling function\n    });\n    return connectionPromise;\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (connectDB);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL2xpYi9tb25nb29zZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBZ0M7QUFFaEMsbUVBQW1FO0FBQ25FLElBQUlDLG9CQUFvQjtBQUV4QixNQUFNQyxZQUFZO0lBQ2hCLG9FQUFvRTtJQUNwRSxJQUFJRCxtQkFBbUI7UUFDckIsbURBQW1EO1FBQ25ELE9BQU9BO0lBQ1Q7SUFFQSw2Q0FBNkM7SUFDN0MsSUFBSSxDQUFDRSxRQUFRQyxHQUFHLENBQUNDLFdBQVcsRUFBRTtRQUM1QixNQUFNLElBQUlDLE1BQU07SUFDbEI7SUFFQSxrQ0FBa0M7SUFDbENDLFFBQVFDLEdBQUcsQ0FBQztJQUNaUCxvQkFBb0JELHVEQUFnQixDQUFDRyxRQUFRQyxHQUFHLENBQUNDLFdBQVcsRUFBRTtRQUM1REssUUFBUVAsUUFBUUMsR0FBRyxDQUFDTyxVQUFVLElBQUk7UUFDbEMsdURBQXVEO1FBQ3ZEQyxpQkFBaUI7UUFDakJDLG9CQUFvQjtJQUN0QixHQUFHQyxJQUFJLENBQUMsQ0FBQ0M7UUFDUFIsUUFBUUMsR0FBRyxDQUFDO1FBQ1osT0FBT08sa0JBQWtCLG9DQUFvQztJQUMvRCxHQUFHQyxLQUFLLENBQUNDLENBQUFBO1FBQ1BWLFFBQVFXLEtBQUssQ0FBQyw4QkFBOEJEO1FBQzVDaEIsb0JBQW9CLE1BQU0sOENBQThDO1FBQ3hFLE1BQU1nQixLQUFLLHNEQUFzRDtJQUNuRTtJQUVBLE9BQU9oQjtBQUNUO0FBRUEsaUVBQWVDLFNBQVNBLEVBQUMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYmF1ZGlcXE9uZURyaXZlXFxEZXNrdG9wXFxQcm9tcHRQcm9cXFByb21wdFByb1xcbGliXFxtb25nb29zZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xyXG5cclxuLy8gQ2FjaGUgdGhlIGNvbm5lY3Rpb24gcHJvbWlzZSB0byBhdm9pZCByZWNvbm5lY3Rpbmcgb24gZXZlcnkgY2FsbFxyXG5sZXQgY29ubmVjdGlvblByb21pc2UgPSBudWxsO1xyXG5cclxuY29uc3QgY29ubmVjdERCID0gYXN5bmMgKCkgPT4ge1xyXG4gIC8vIElmIGEgY29ubmVjdGlvbiBwcm9taXNlIGV4aXN0cywgcmV0dXJuIGl0IHRvIHJldXNlIHRoZSBjb25uZWN0aW9uXHJcbiAgaWYgKGNvbm5lY3Rpb25Qcm9taXNlKSB7XHJcbiAgICAvLyBjb25zb2xlLmxvZyhcIlVzaW5nIGNhY2hlZCBNb25nb29zZSBjb25uZWN0aW9uXCIpO1xyXG4gICAgcmV0dXJuIGNvbm5lY3Rpb25Qcm9taXNlO1xyXG4gIH1cclxuXHJcbiAgLy8gQ2hlY2sgZm9yIE1vbmdvREIgVVJJIGVudmlyb25tZW50IHZhcmlhYmxlXHJcbiAgaWYgKCFwcm9jZXNzLmVudi5NT05HT0RCX1VSSSkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdQbGVhc2UgZGVmaW5lIHRoZSBNT05HT0RCX1VSSSBlbnZpcm9ubWVudCB2YXJpYWJsZSBpbnNpZGUgLmVudi5sb2NhbCcpO1xyXG4gIH1cclxuXHJcbiAgLy8gQ3JlYXRlIGEgbmV3IGNvbm5lY3Rpb24gcHJvbWlzZVxyXG4gIGNvbnNvbGUubG9nKFwiQ3JlYXRpbmcgbmV3IE1vbmdvb3NlIGNvbm5lY3Rpb24uLi5cIik7XHJcbiAgY29ubmVjdGlvblByb21pc2UgPSBtb25nb29zZS5jb25uZWN0KHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJLCB7XHJcbiAgICBkYk5hbWU6IHByb2Nlc3MuZW52Lk1PTkdPREJfREIgfHwgJ1Byb21wdFBybycsIC8vIFVzZSBzcGVjaWZpYyBEQiBuYW1lIG9yIGRlZmF1bHRcclxuICAgIC8vIFJlY29tbWVuZGVkIG9wdGlvbnMgKGNoZWNrIE1vbmdvb3NlIGRvY3MgZm9yIGxhdGVzdClcclxuICAgIHVzZU5ld1VybFBhcnNlcjogdHJ1ZSxcclxuICAgIHVzZVVuaWZpZWRUb3BvbG9neTogdHJ1ZSxcclxuICB9KS50aGVuKChtb25nb29zZUluc3RhbmNlKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhcIk1vbmdvb3NlIGNvbm5lY3RlZCBzdWNjZXNzZnVsbHkuXCIpO1xyXG4gICAgcmV0dXJuIG1vbmdvb3NlSW5zdGFuY2U7IC8vIFRoZSByZXNvbHZlZCB2YWx1ZSBvZiB0aGUgcHJvbWlzZVxyXG4gIH0pLmNhdGNoKGVyciA9PiB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiTW9uZ29vc2UgY29ubmVjdGlvbiBlcnJvcjpcIiwgZXJyKTtcclxuICAgIGNvbm5lY3Rpb25Qcm9taXNlID0gbnVsbDsgLy8gUmVzZXQgcHJvbWlzZSBvbiBlcnJvciBzbyByZXRyeSBpcyBwb3NzaWJsZVxyXG4gICAgdGhyb3cgZXJyOyAvLyBSZS10aHJvdyBlcnJvciB0byBiZSBjYXVnaHQgYnkgdGhlIGNhbGxpbmcgZnVuY3Rpb25cclxuICB9KTtcclxuXHJcbiAgcmV0dXJuIGNvbm5lY3Rpb25Qcm9taXNlO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdERCOyAiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJjb25uZWN0aW9uUHJvbWlzZSIsImNvbm5lY3REQiIsInByb2Nlc3MiLCJlbnYiLCJNT05HT0RCX1VSSSIsIkVycm9yIiwiY29uc29sZSIsImxvZyIsImNvbm5lY3QiLCJkYk5hbWUiLCJNT05HT0RCX0RCIiwidXNlTmV3VXJsUGFyc2VyIiwidXNlVW5pZmllZFRvcG9sb2d5IiwidGhlbiIsIm1vbmdvb3NlSW5zdGFuY2UiLCJjYXRjaCIsImVyciIsImVycm9yIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./lib/mongoose.js\n");

/***/ }),

/***/ "(api-node)/./models/team.js":
/*!************************!*\
  !*** ./models/team.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n/**\n * Team data model and validation functions\n */ \n// Define default limits based on plan\nconst PLAN_LIMITS = {\n    Free: {\n        promptLimit: 50\n    },\n    Pro: {\n        promptLimit: 1000\n    }\n};\nconst MemberSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    user: {\n        type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.ObjectId,\n        ref: 'User',\n        required: true\n    },\n    role: {\n        type: String,\n        required: true,\n        enum: [\n            'owner',\n            'admin',\n            'member'\n        ],\n        default: 'member'\n    },\n    joinedAt: {\n        type: Date,\n        default: Date.now\n    }\n}, {\n    _id: false\n}); // No separate _id for members sub-document\nconst TeamSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    name: {\n        type: String,\n        required: [\n            true,\n            'Team name is required.'\n        ],\n        trim: true,\n        maxlength: [\n            100,\n            'Team name cannot exceed 100 characters.'\n        ]\n    },\n    description: {\n        type: String,\n        trim: true,\n        maxlength: [\n            500,\n            'Team description cannot exceed 500 characters.'\n        ]\n    },\n    creator: {\n        type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.ObjectId,\n        ref: 'User',\n        required: [\n            true,\n            'Team creator is required.'\n        ]\n    },\n    members: [\n        MemberSchema\n    ],\n    // --- Plan & Limits ---\n    plan: {\n        type: String,\n        enum: Object.keys(PLAN_LIMITS),\n        default: 'Free'\n    },\n    promptLimit: {\n        type: Number\n    },\n    // --- Stripe Integration Fields ---\n    stripeCustomerId: {\n        type: String,\n        index: true,\n        sparse: true // Allow null/undefined values in the index\n    },\n    stripeSubscriptionId: {\n        type: String,\n        index: true,\n        sparse: true\n    }\n}, {\n    timestamps: true // Automatically add createdAt and updatedAt\n});\n// --- Indexing ---\nTeamSchema.index({\n    name: 1\n});\n// Ensure efficient querying for members\nTeamSchema.index({\n    \"members.user\": 1\n});\nTeamSchema.index({\n    plan: 1\n}); // Index the plan field\n// --- Pre-save Hook ---\n// Automatically add the creator as the initial 'owner' member when a team is created\nTeamSchema.pre('save', function(next) {\n    // Set default members\n    if (this.isNew) {\n        if (!this.members) {\n            this.members = [];\n        }\n        const creatorExists = this.members.some((member)=>member.user.equals(this.creator));\n        if (!creatorExists) {\n            this.members.push({\n                user: this.creator,\n                role: 'owner'\n            });\n        }\n    }\n    // Set default promptLimit based on plan if not already set or if plan changes\n    if (this.isNew || this.isModified('plan')) {\n        const limits = PLAN_LIMITS[this.plan];\n        if (limits) {\n            this.promptLimit = limits.promptLimit;\n        }\n    }\n    next();\n});\n// --- Model Creation ---\n// Use 'Team' as the model name following Mongoose convention\nconst Team = mongoose__WEBPACK_IMPORTED_MODULE_0__.models.Team || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('Team', TeamSchema);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Team); /**\n * Team member schema\n * @typedef {Object} TeamMember\n * @property {string} userId - User ID\n * @property {string} role - Member role (owner, admin, member)\n * @property {string} joinedAt - Timestamp when member joined\n */  // Removed helper functions (validateTeam, sanitizeTeam, getMemberRole, isTeamAdmin, isTeamMember)\n // These have been moved to lib/teamUtils.js to avoid including Mongoose model code in the client bundle.\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFXLEdBQUcwQyxPQUFPMUMsV0FBVztRQUN6QztJQUNKO0lBRUFrQztBQUNKO0FBR0EseUJBQXlCO0FBQ3pCLDZEQUE2RDtBQUM3RCxNQUFNUyxPQUFPOUMsNENBQU1BLENBQUM4QyxJQUFJLElBQUloRCxxREFBYyxDQUFDLFFBQVFzQjtBQUVuRCxpRUFBZTBCLElBQUlBLEVBQUMsQ0FFcEI7Ozs7OztDQU1DLElBRUQsa0dBQWtHO0NBQ2xHLHlHQUF5RyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxiYXVkaVxcT25lRHJpdmVcXERlc2t0b3BcXFByb21wdFByb1xcUHJvbXB0UHJvXFxtb2RlbHNcXHRlYW0uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUZWFtIGRhdGEgbW9kZWwgYW5kIHZhbGlkYXRpb24gZnVuY3Rpb25zXG4gKi9cblxuaW1wb3J0IG1vbmdvb3NlLCB7IFNjaGVtYSwgbW9kZWxzIH0gZnJvbSAnbW9uZ29vc2UnO1xuXG4vLyBEZWZpbmUgZGVmYXVsdCBsaW1pdHMgYmFzZWQgb24gcGxhblxuY29uc3QgUExBTl9MSU1JVFMgPSB7XG4gIEZyZWU6IHsgcHJvbXB0TGltaXQ6IDUwIH0sXG4gIFBybzogeyBwcm9tcHRMaW1pdDogMTAwMCB9XG59O1xuXG5jb25zdCBNZW1iZXJTY2hlbWEgPSBuZXcgU2NoZW1hKHtcbiAgICB1c2VyOiB7XG4gICAgICAgIHR5cGU6IFNjaGVtYS5UeXBlcy5PYmplY3RJZCxcbiAgICAgICAgcmVmOiAnVXNlcicsXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgfSxcbiAgICByb2xlOiB7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIGVudW06IFsnb3duZXInLCAnYWRtaW4nLCAnbWVtYmVyJ10sIC8vIERlZmluZSBhbGxvd2VkIHJvbGVzXG4gICAgICAgIGRlZmF1bHQ6ICdtZW1iZXInXG4gICAgfSxcbiAgICBqb2luZWRBdDoge1xuICAgICAgICB0eXBlOiBEYXRlLFxuICAgICAgICBkZWZhdWx0OiBEYXRlLm5vd1xuICAgIH1cbn0sIHsgX2lkOiBmYWxzZSB9KTsgLy8gTm8gc2VwYXJhdGUgX2lkIGZvciBtZW1iZXJzIHN1Yi1kb2N1bWVudFxuXG5jb25zdCBUZWFtU2NoZW1hID0gbmV3IFNjaGVtYSh7XG4gICAgbmFtZToge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIHJlcXVpcmVkOiBbdHJ1ZSwgJ1RlYW0gbmFtZSBpcyByZXF1aXJlZC4nXSxcbiAgICAgICAgdHJpbTogdHJ1ZSxcbiAgICAgICAgbWF4bGVuZ3RoOiBbMTAwLCAnVGVhbSBuYW1lIGNhbm5vdCBleGNlZWQgMTAwIGNoYXJhY3RlcnMuJ11cbiAgICB9LFxuICAgIGRlc2NyaXB0aW9uOiB7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgdHJpbTogdHJ1ZSxcbiAgICAgICAgbWF4bGVuZ3RoOiBbNTAwLCAnVGVhbSBkZXNjcmlwdGlvbiBjYW5ub3QgZXhjZWVkIDUwMCBjaGFyYWN0ZXJzLiddXG4gICAgfSxcbiAgICBjcmVhdG9yOiB7IC8vIENoYW5nZWQgZnJvbSB1c2VySWQgZm9yIGNsYXJpdHksIHJlcHJlc2VudHMgdGhlIGluaXRpYWwgb3duZXJcbiAgICAgICAgdHlwZTogU2NoZW1hLlR5cGVzLk9iamVjdElkLFxuICAgICAgICByZWY6ICdVc2VyJyxcbiAgICAgICAgcmVxdWlyZWQ6IFt0cnVlLCAnVGVhbSBjcmVhdG9yIGlzIHJlcXVpcmVkLiddXG4gICAgfSxcbiAgICBtZW1iZXJzOiBbTWVtYmVyU2NoZW1hXSwgLy8gQXJyYXkgb2YgbWVtYmVycyB3aXRoIHJvbGVzXG4gICAgLy8gLS0tIFBsYW4gJiBMaW1pdHMgLS0tXG4gICAgcGxhbjoge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIGVudW06IE9iamVjdC5rZXlzKFBMQU5fTElNSVRTKSwgLy8gVXNlIGtleXMgZnJvbSBQTEFOX0xJTUlUU1xuICAgICAgICBkZWZhdWx0OiAnRnJlZSdcbiAgICB9LFxuICAgIHByb21wdExpbWl0OiB7XG4gICAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgICAgLy8gRGVmYXVsdCBsaW1pdCBzZXQgYmFzZWQgb24gcGxhbiB2aWEgcHJlLXNhdmUgaG9va1xuICAgIH0sXG4gICAgLy8gLS0tIFN0cmlwZSBJbnRlZ3JhdGlvbiBGaWVsZHMgLS0tXG4gICAgc3RyaXBlQ3VzdG9tZXJJZDoge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIGluZGV4OiB0cnVlLCAvLyBJbmRleCBpZiBsb29raW5nIHVwIHRlYW1zIGJ5IGN1c3RvbWVyIElEXG4gICAgICAgIHNwYXJzZTogdHJ1ZSAvLyBBbGxvdyBudWxsL3VuZGVmaW5lZCB2YWx1ZXMgaW4gdGhlIGluZGV4XG4gICAgfSxcbiAgICBzdHJpcGVTdWJzY3JpcHRpb25JZDoge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIGluZGV4OiB0cnVlLFxuICAgICAgICBzcGFyc2U6IHRydWVcbiAgICB9LFxuICAgIC8vIENvdWxkIGFkZCBvdGhlciBsaW1pdHMgaGVyZSBsYXRlciAoZS5nLiwgYXBpQ2FsbExpbWl0KVxufSwge1xuICAgIHRpbWVzdGFtcHM6IHRydWUgLy8gQXV0b21hdGljYWxseSBhZGQgY3JlYXRlZEF0IGFuZCB1cGRhdGVkQXRcbn0pO1xuXG4vLyAtLS0gSW5kZXhpbmcgLS0tXG5UZWFtU2NoZW1hLmluZGV4KHsgbmFtZTogMSB9KTtcbi8vIEVuc3VyZSBlZmZpY2llbnQgcXVlcnlpbmcgZm9yIG1lbWJlcnNcblRlYW1TY2hlbWEuaW5kZXgoeyBcIm1lbWJlcnMudXNlclwiOiAxIH0pO1xuVGVhbVNjaGVtYS5pbmRleCh7IHBsYW46IDEgfSk7IC8vIEluZGV4IHRoZSBwbGFuIGZpZWxkXG5cbi8vIC0tLSBQcmUtc2F2ZSBIb29rIC0tLVxuLy8gQXV0b21hdGljYWxseSBhZGQgdGhlIGNyZWF0b3IgYXMgdGhlIGluaXRpYWwgJ293bmVyJyBtZW1iZXIgd2hlbiBhIHRlYW0gaXMgY3JlYXRlZFxuVGVhbVNjaGVtYS5wcmUoJ3NhdmUnLCBmdW5jdGlvbihuZXh0KSB7XG4gICAgLy8gU2V0IGRlZmF1bHQgbWVtYmVyc1xuICAgIGlmICh0aGlzLmlzTmV3KSB7XG4gICAgICAgIGlmICghdGhpcy5tZW1iZXJzKSB7XG4gICAgICAgICAgICB0aGlzLm1lbWJlcnMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjcmVhdG9yRXhpc3RzID0gdGhpcy5tZW1iZXJzLnNvbWUobWVtYmVyID0+IG1lbWJlci51c2VyLmVxdWFscyh0aGlzLmNyZWF0b3IpKTtcbiAgICAgICAgaWYgKCFjcmVhdG9yRXhpc3RzKSB7XG4gICAgICAgICAgICB0aGlzLm1lbWJlcnMucHVzaCh7IHVzZXI6IHRoaXMuY3JlYXRvciwgcm9sZTogJ293bmVyJyB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNldCBkZWZhdWx0IHByb21wdExpbWl0IGJhc2VkIG9uIHBsYW4gaWYgbm90IGFscmVhZHkgc2V0IG9yIGlmIHBsYW4gY2hhbmdlc1xuICAgIGlmICh0aGlzLmlzTmV3IHx8IHRoaXMuaXNNb2RpZmllZCgncGxhbicpKSB7XG4gICAgICAgIGNvbnN0IGxpbWl0cyA9IFBMQU5fTElNSVRTW3RoaXMucGxhbl07XG4gICAgICAgIGlmIChsaW1pdHMpIHtcbiAgICAgICAgICAgIHRoaXMucHJvbXB0TGltaXQgPSBsaW1pdHMucHJvbXB0TGltaXQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBuZXh0KCk7XG59KTtcblxuXG4vLyAtLS0gTW9kZWwgQ3JlYXRpb24gLS0tXG4vLyBVc2UgJ1RlYW0nIGFzIHRoZSBtb2RlbCBuYW1lIGZvbGxvd2luZyBNb25nb29zZSBjb252ZW50aW9uXG5jb25zdCBUZWFtID0gbW9kZWxzLlRlYW0gfHwgbW9uZ29vc2UubW9kZWwoJ1RlYW0nLCBUZWFtU2NoZW1hKTtcblxuZXhwb3J0IGRlZmF1bHQgVGVhbTtcblxuLyoqXG4gKiBUZWFtIG1lbWJlciBzY2hlbWFcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFRlYW1NZW1iZXJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB1c2VySWQgLSBVc2VyIElEXG4gKiBAcHJvcGVydHkge3N0cmluZ30gcm9sZSAtIE1lbWJlciByb2xlIChvd25lciwgYWRtaW4sIG1lbWJlcilcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBqb2luZWRBdCAtIFRpbWVzdGFtcCB3aGVuIG1lbWJlciBqb2luZWRcbiAqL1xuXG4vLyBSZW1vdmVkIGhlbHBlciBmdW5jdGlvbnMgKHZhbGlkYXRlVGVhbSwgc2FuaXRpemVUZWFtLCBnZXRNZW1iZXJSb2xlLCBpc1RlYW1BZG1pbiwgaXNUZWFtTWVtYmVyKVxuLy8gVGhlc2UgaGF2ZSBiZWVuIG1vdmVkIHRvIGxpYi90ZWFtVXRpbHMuanMgdG8gYXZvaWQgaW5jbHVkaW5nIE1vbmdvb3NlIG1vZGVsIGNvZGUgaW4gdGhlIGNsaWVudCBidW5kbGUuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiU2NoZW1hIiwibW9kZWxzIiwiUExBTl9MSU1JVFMiLCJGcmVlIiwicHJvbXB0TGltaXQiLCJQcm8iLCJNZW1iZXJTY2hlbWEiLCJ1c2VyIiwidHlwZSIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJyZXF1aXJlZCIsInJvbGUiLCJTdHJpbmciLCJlbnVtIiwiZGVmYXVsdCIsImpvaW5lZEF0IiwiRGF0ZSIsIm5vdyIsIl9pZCIsIlRlYW1TY2hlbWEiLCJuYW1lIiwidHJpbSIsIm1heGxlbmd0aCIsImRlc2NyaXB0aW9uIiwiY3JlYXRvciIsIm1lbWJlcnMiLCJwbGFuIiwiT2JqZWN0Iiwia2V5cyIsIk51bWJlciIsInN0cmlwZUN1c3RvbWVySWQiLCJpbmRleCIsInNwYXJzZSIsInN0cmlwZVN1YnNjcmlwdGlvbklkIiwidGltZXN0YW1wcyIsInByZSIsIm5leHQiLCJpc05ldyIsImNyZWF0b3JFeGlzdHMiLCJzb21lIiwibWVtYmVyIiwiZXF1YWxzIiwicHVzaCIsImlzTW9kaWZpZWQiLCJsaW1pdHMiLCJUZWFtIiwibW9kZWwiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./models/team.js\n");

/***/ }),

/***/ "(api-node)/./models/user.js":
/*!************************!*\
  !*** ./models/user.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   sanitizeUser: () => (/* binding */ sanitizeUser),\n/* harmony export */   validateUser: () => (/* binding */ validateUser)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\n// Define the User Schema using Mongoose\nconst UserSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    username: {\n        type: String,\n        required: [\n            true,\n            'Username is required.'\n        ],\n        unique: [\n            true,\n            'Username already exists.'\n        ],\n        match: [\n            /^(?=.{4,20}$)(?![_.])(?!.*[_.]{2})[a-zA-Z0-9._]+(?<![_.])$/,\n            \"Username invalid, it should contain 4-20 alphanumeric letters and be unique!\"\n        ] // Example regex validation\n    },\n    name: {\n        type: String,\n        required: [\n            true,\n            'Name is required.'\n        ],\n        trim: true\n    },\n    email: {\n        type: String,\n        required: [\n            true,\n            'Email is required.'\n        ],\n        unique: true,\n        lowercase: true,\n        trim: true,\n        match: [\n            /\\S+@\\S+\\.\\S+/,\n            'Please use a valid email address.'\n        ]\n    },\n    password: {\n        type: String,\n        required: [\n            true,\n            'Password is required.'\n        ],\n        select: false // Prevents password hash from being sent by default\n    },\n    image: {\n        type: String\n    },\n    role: {\n        type: String,\n        enum: [\n            'user',\n            'admin'\n        ],\n        default: 'user'\n    },\n    bio: {\n        type: String,\n        maxlength: 160 // Example constraint\n    },\n    preferences: {\n        type: Object // Or define a more specific sub-schema if needed\n    },\n    hasCompletedOnboarding: {\n        type: Boolean,\n        default: false\n    },\n    // --- Payment/Plan Fields ---\n    plan: {\n        type: String,\n        enum: [\n            'Free',\n            'Pro'\n        ],\n        default: 'Free' // Default to the 'Free' plan\n    },\n    promptCount: {\n        type: Number,\n        default: 0,\n        min: 0 // Ensure count doesn't go below zero\n    },\n    stripeCustomerId: {\n        type: String,\n        index: true // Index if you often look up users by Stripe ID\n    }\n}, {\n    timestamps: true\n}); // Enable automatic timestamps\n// Create the User model if it doesn't already exist\nconst User = mongoose__WEBPACK_IMPORTED_MODULE_0__.models.User || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('User', UserSchema);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (User);\n// Validation for user data (consider adapting to Mongoose validation or using alongside)\nconst validateUser = (data)=>{\n    const errors = {};\n    // Username validation\n    if (!data.username) {\n        errors.username = 'Username is required';\n    } else if (data.username.length < 4 || data.username.length > 20) {\n        errors.username = 'Username must be between 4 and 20 characters';\n    }\n    if (!/^[a-zA-Z0-9._]+$/.test(data.username) || data.username.includes('..') || data.username.startsWith('.') || data.username.endsWith('.') || data.username.startsWith('_') || data.username.endsWith('_')) {\n        // Check if username exists first before applying regex if making optional\n        if (data.username) errors.username = 'Username contains invalid characters.';\n    }\n    // Name validation (removed - no longer required on signup)\n    /*\r\n  if (!data.name) {\r\n    errors.name = 'Name is required';\r\n  } else if (data.name.length < 2) {\r\n    errors.name = 'Name must be at least 2 characters';\r\n  }\r\n  */ // Email validation\n    if (!data.email) {\n        errors.email = 'Email is required';\n    } else if (!/\\S+@\\S+\\.\\S+/.test(data.email)) {\n        errors.email = 'Email is invalid';\n    }\n    // Password validation (for input, not the hash)\n    // Note: Mongoose handles required check. This is for length etc. on signup.\n    if (data.password !== undefined) {\n        if (data.password.length < 8) {\n            errors.password = 'Password must be at least 8 characters';\n        }\n    }\n    return {\n        isValid: Object.keys(errors).length === 0,\n        errors\n    };\n};\n// Method to sanitize user data for client-side (remove sensitive info)\n// Adapt this if you fetch user data using Mongoose and need to hide fields\n// Mongoose 'select: false' on password helps, but this can be used for other fields\nconst sanitizeUser = (user)=>{\n    if (!user) return null;\n    // If user is a Mongoose document, convert to object first\n    const userObject = typeof user.toObject === 'function' ? user.toObject() : user;\n    const { password, __v, ...sanitizedUser } = userObject; // Remove password and __v\n    return sanitizedUser;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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M0N5QixPQUFPekIsS0FBSyxHQUFHO0lBQ2pCO0lBRUEsZ0RBQWdEO0lBQ2hELDRFQUE0RTtJQUM1RSxJQUFJd0IsS0FBS3RCLFFBQVEsS0FBSzZCLFdBQVc7UUFDL0IsSUFBSVAsS0FBS3RCLFFBQVEsQ0FBQ3dCLE1BQU0sR0FBRyxHQUFHO1lBQzVCRCxPQUFPdkIsUUFBUSxHQUFHO1FBQ3BCO0lBQ0Y7SUFFQSxPQUFPO1FBQ0w4QixTQUFTckIsT0FBT3NCLElBQUksQ0FBQ1IsUUFBUUMsTUFBTSxLQUFLO1FBQ3hDRDtJQUNGO0FBQ0YsRUFBRTtBQUVGLHVFQUF1RTtBQUN2RSwyRUFBMkU7QUFDM0Usb0ZBQW9GO0FBQzdFLE1BQU1TLGVBQWUsQ0FBQ0M7SUFDM0IsSUFBSSxDQUFDQSxNQUFNLE9BQU87SUFFbEIsMERBQTBEO0lBQzFELE1BQU1DLGFBQWEsT0FBT0QsS0FBS0UsUUFBUSxLQUFLLGFBQWFGLEtBQUtFLFFBQVEsS0FBS0Y7SUFFM0UsTUFBTSxFQUFFakMsUUFBUSxFQUFFb0MsR0FBRyxFQUFFLEdBQUdDLGVBQWUsR0FBR0gsWUFBWSwwQkFBMEI7SUFDbEYsT0FBT0c7QUFDVCxFQUFFIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGJhdWRpXFxPbmVEcml2ZVxcRGVza3RvcFxcUHJvbXB0UHJvXFxQcm9tcHRQcm9cXG1vZGVsc1xcdXNlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UsIHsgU2NoZW1hLCBtb2RlbHMgfSBmcm9tICdtb25nb29zZSc7XHJcblxyXG4vLyBEZWZpbmUgdGhlIFVzZXIgU2NoZW1hIHVzaW5nIE1vbmdvb3NlXHJcbmNvbnN0IFVzZXJTY2hlbWEgPSBuZXcgU2NoZW1hKHtcclxuICB1c2VybmFtZToge1xyXG4gICAgdHlwZTogU3RyaW5nLFxyXG4gICAgcmVxdWlyZWQ6IFt0cnVlLCAnVXNlcm5hbWUgaXMgcmVxdWlyZWQuJ10sXHJcbiAgICB1bmlxdWU6IFt0cnVlLCAnVXNlcm5hbWUgYWxyZWFkeSBleGlzdHMuJ10sXHJcbiAgICBtYXRjaDogWy9eKD89Lns0LDIwfSQpKD8hW18uXSkoPyEuKltfLl17Mn0pW2EtekEtWjAtOS5fXSsoPzwhW18uXSkkLywgXCJVc2VybmFtZSBpbnZhbGlkLCBpdCBzaG91bGQgY29udGFpbiA0LTIwIGFscGhhbnVtZXJpYyBsZXR0ZXJzIGFuZCBiZSB1bmlxdWUhXCJdIC8vIEV4YW1wbGUgcmVnZXggdmFsaWRhdGlvblxyXG4gIH0sXHJcbiAgbmFtZToge1xyXG4gICAgdHlwZTogU3RyaW5nLFxyXG4gICAgcmVxdWlyZWQ6IFt0cnVlLCAnTmFtZSBpcyByZXF1aXJlZC4nXSxcclxuICAgIHRyaW06IHRydWVcclxuICB9LFxyXG4gIGVtYWlsOiB7XHJcbiAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICByZXF1aXJlZDogW3RydWUsICdFbWFpbCBpcyByZXF1aXJlZC4nXSxcclxuICAgIHVuaXF1ZTogdHJ1ZSxcclxuICAgIGxvd2VyY2FzZTogdHJ1ZSxcclxuICAgIHRyaW06IHRydWUsXHJcbiAgICBtYXRjaDogWy9cXFMrQFxcUytcXC5cXFMrLywgJ1BsZWFzZSB1c2UgYSB2YWxpZCBlbWFpbCBhZGRyZXNzLiddXHJcbiAgfSxcclxuICBwYXNzd29yZDoge1xyXG4gICAgdHlwZTogU3RyaW5nLFxyXG4gICAgcmVxdWlyZWQ6IFt0cnVlLCAnUGFzc3dvcmQgaXMgcmVxdWlyZWQuJ10sIC8vIFdpbGwgc3RvcmUgdGhlIGhhc2hcclxuICAgIHNlbGVjdDogZmFsc2UgLy8gUHJldmVudHMgcGFzc3dvcmQgaGFzaCBmcm9tIGJlaW5nIHNlbnQgYnkgZGVmYXVsdFxyXG4gIH0sXHJcbiAgaW1hZ2U6IHtcclxuICAgIHR5cGU6IFN0cmluZywgLy8gVVJMIHRvIHByb2ZpbGUgaW1hZ2VcclxuICB9LFxyXG4gIHJvbGU6IHtcclxuICAgIHR5cGU6IFN0cmluZyxcclxuICAgIGVudW06IFsndXNlcicsICdhZG1pbiddLFxyXG4gICAgZGVmYXVsdDogJ3VzZXInXHJcbiAgfSxcclxuICBiaW86IHtcclxuICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICBtYXhsZW5ndGg6IDE2MCAvLyBFeGFtcGxlIGNvbnN0cmFpbnRcclxuICB9LFxyXG4gIHByZWZlcmVuY2VzOiB7XHJcbiAgICAgIHR5cGU6IE9iamVjdCAvLyBPciBkZWZpbmUgYSBtb3JlIHNwZWNpZmljIHN1Yi1zY2hlbWEgaWYgbmVlZGVkXHJcbiAgfSxcclxuICBoYXNDb21wbGV0ZWRPbmJvYXJkaW5nOiB7XHJcbiAgICB0eXBlOiBCb29sZWFuLFxyXG4gICAgZGVmYXVsdDogZmFsc2VcclxuICB9LFxyXG4gIC8vIC0tLSBQYXltZW50L1BsYW4gRmllbGRzIC0tLVxyXG4gIHBsYW46IHtcclxuICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICBlbnVtOiBbJ0ZyZWUnLCAnUHJvJ10sIC8vIFVzZSAnRnJlZScgYW5kICdQcm8nIGZvciBwbGFuIG5hbWVzXHJcbiAgICAgIGRlZmF1bHQ6ICdGcmVlJyAvLyBEZWZhdWx0IHRvIHRoZSAnRnJlZScgcGxhblxyXG4gIH0sXHJcbiAgcHJvbXB0Q291bnQ6IHtcclxuICAgICAgdHlwZTogTnVtYmVyLFxyXG4gICAgICBkZWZhdWx0OiAwLFxyXG4gICAgICBtaW46IDAgLy8gRW5zdXJlIGNvdW50IGRvZXNuJ3QgZ28gYmVsb3cgemVyb1xyXG4gIH0sXHJcbiAgc3RyaXBlQ3VzdG9tZXJJZDogeyAvLyBPcHRpb25hbDogU3RvcmUgU3RyaXBlIEN1c3RvbWVyIElEIGlmIHVzaW5nIFN0cmlwZVxyXG4gICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgIGluZGV4OiB0cnVlIC8vIEluZGV4IGlmIHlvdSBvZnRlbiBsb29rIHVwIHVzZXJzIGJ5IFN0cmlwZSBJRFxyXG4gIH0sXHJcbiAgLy8gTW9uZ29vc2UgYXV0b21hdGljYWxseSBhZGRzIGNyZWF0ZWRBdCBhbmQgdXBkYXRlZEF0XHJcbn0sIHsgdGltZXN0YW1wczogdHJ1ZSB9KTsgLy8gRW5hYmxlIGF1dG9tYXRpYyB0aW1lc3RhbXBzXHJcblxyXG4vLyBDcmVhdGUgdGhlIFVzZXIgbW9kZWwgaWYgaXQgZG9lc24ndCBhbHJlYWR5IGV4aXN0XHJcbmNvbnN0IFVzZXIgPSBtb2RlbHMuVXNlciB8fCBtb25nb29zZS5tb2RlbCgnVXNlcicsIFVzZXJTY2hlbWEpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgVXNlcjtcclxuXHJcbi8vIFZhbGlkYXRpb24gZm9yIHVzZXIgZGF0YSAoY29uc2lkZXIgYWRhcHRpbmcgdG8gTW9uZ29vc2UgdmFsaWRhdGlvbiBvciB1c2luZyBhbG9uZ3NpZGUpXHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0ZVVzZXIgPSAoZGF0YSkgPT4ge1xyXG4gIGNvbnN0IGVycm9ycyA9IHt9O1xyXG5cclxuICAvLyBVc2VybmFtZSB2YWxpZGF0aW9uXHJcbiAgaWYgKCFkYXRhLnVzZXJuYW1lKSB7XHJcbiAgICAgIGVycm9ycy51c2VybmFtZSA9ICdVc2VybmFtZSBpcyByZXF1aXJlZCc7XHJcbiAgfSBlbHNlIGlmIChkYXRhLnVzZXJuYW1lLmxlbmd0aCA8IDQgfHwgZGF0YS51c2VybmFtZS5sZW5ndGggPiAyMCkge1xyXG4gICAgICBlcnJvcnMudXNlcm5hbWUgPSAnVXNlcm5hbWUgbXVzdCBiZSBiZXR3ZWVuIDQgYW5kIDIwIGNoYXJhY3RlcnMnO1xyXG4gIH1cclxuICBpZiAoIS9eW2EtekEtWjAtOS5fXSskLy50ZXN0KGRhdGEudXNlcm5hbWUpIHx8IGRhdGEudXNlcm5hbWUuaW5jbHVkZXMoJy4uJykgfHwgZGF0YS51c2VybmFtZS5zdGFydHNXaXRoKCcuJykgfHwgZGF0YS51c2VybmFtZS5lbmRzV2l0aCgnLicpIHx8IGRhdGEudXNlcm5hbWUuc3RhcnRzV2l0aCgnXycpIHx8IGRhdGEudXNlcm5hbWUuZW5kc1dpdGgoJ18nKSkge1xyXG4gICAgICAvLyBDaGVjayBpZiB1c2VybmFtZSBleGlzdHMgZmlyc3QgYmVmb3JlIGFwcGx5aW5nIHJlZ2V4IGlmIG1ha2luZyBvcHRpb25hbFxyXG4gICAgICBpZihkYXRhLnVzZXJuYW1lKSBlcnJvcnMudXNlcm5hbWUgPSAnVXNlcm5hbWUgY29udGFpbnMgaW52YWxpZCBjaGFyYWN0ZXJzLic7XHJcbiAgfVxyXG5cclxuICAvLyBOYW1lIHZhbGlkYXRpb24gKHJlbW92ZWQgLSBubyBsb25nZXIgcmVxdWlyZWQgb24gc2lnbnVwKVxyXG4gIC8qXHJcbiAgaWYgKCFkYXRhLm5hbWUpIHtcclxuICAgIGVycm9ycy5uYW1lID0gJ05hbWUgaXMgcmVxdWlyZWQnO1xyXG4gIH0gZWxzZSBpZiAoZGF0YS5uYW1lLmxlbmd0aCA8IDIpIHtcclxuICAgIGVycm9ycy5uYW1lID0gJ05hbWUgbXVzdCBiZSBhdCBsZWFzdCAyIGNoYXJhY3RlcnMnO1xyXG4gIH1cclxuICAqL1xyXG5cclxuICAvLyBFbWFpbCB2YWxpZGF0aW9uXHJcbiAgaWYgKCFkYXRhLmVtYWlsKSB7XHJcbiAgICBlcnJvcnMuZW1haWwgPSAnRW1haWwgaXMgcmVxdWlyZWQnO1xyXG4gIH0gZWxzZSBpZiAoIS9cXFMrQFxcUytcXC5cXFMrLy50ZXN0KGRhdGEuZW1haWwpKSB7XHJcbiAgICBlcnJvcnMuZW1haWwgPSAnRW1haWwgaXMgaW52YWxpZCc7XHJcbiAgfVxyXG5cclxuICAvLyBQYXNzd29yZCB2YWxpZGF0aW9uIChmb3IgaW5wdXQsIG5vdCB0aGUgaGFzaClcclxuICAvLyBOb3RlOiBNb25nb29zZSBoYW5kbGVzIHJlcXVpcmVkIGNoZWNrLiBUaGlzIGlzIGZvciBsZW5ndGggZXRjLiBvbiBzaWdudXAuXHJcbiAgaWYgKGRhdGEucGFzc3dvcmQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgaWYgKGRhdGEucGFzc3dvcmQubGVuZ3RoIDwgOCkge1xyXG4gICAgICBlcnJvcnMucGFzc3dvcmQgPSAnUGFzc3dvcmQgbXVzdCBiZSBhdCBsZWFzdCA4IGNoYXJhY3RlcnMnO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGlzVmFsaWQ6IE9iamVjdC5rZXlzKGVycm9ycykubGVuZ3RoID09PSAwLFxyXG4gICAgZXJyb3JzXHJcbiAgfTtcclxufTtcclxuXHJcbi8vIE1ldGhvZCB0byBzYW5pdGl6ZSB1c2VyIGRhdGEgZm9yIGNsaWVudC1zaWRlIChyZW1vdmUgc2Vuc2l0aXZlIGluZm8pXHJcbi8vIEFkYXB0IHRoaXMgaWYgeW91IGZldGNoIHVzZXIgZGF0YSB1c2luZyBNb25nb29zZSBhbmQgbmVlZCB0byBoaWRlIGZpZWxkc1xyXG4vLyBNb25nb29zZSAnc2VsZWN0OiBmYWxzZScgb24gcGFzc3dvcmQgaGVscHMsIGJ1dCB0aGlzIGNhbiBiZSB1c2VkIGZvciBvdGhlciBmaWVsZHNcclxuZXhwb3J0IGNvbnN0IHNhbml0aXplVXNlciA9ICh1c2VyKSA9PiB7XHJcbiAgaWYgKCF1c2VyKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgLy8gSWYgdXNlciBpcyBhIE1vbmdvb3NlIGRvY3VtZW50LCBjb252ZXJ0IHRvIG9iamVjdCBmaXJzdFxyXG4gIGNvbnN0IHVzZXJPYmplY3QgPSB0eXBlb2YgdXNlci50b09iamVjdCA9PT0gJ2Z1bmN0aW9uJyA/IHVzZXIudG9PYmplY3QoKSA6IHVzZXI7XHJcblxyXG4gIGNvbnN0IHsgcGFzc3dvcmQsIF9fdiwgLi4uc2FuaXRpemVkVXNlciB9ID0gdXNlck9iamVjdDsgLy8gUmVtb3ZlIHBhc3N3b3JkIGFuZCBfX3ZcclxuICByZXR1cm4gc2FuaXRpemVkVXNlcjtcclxufTsiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJTY2hlbWEiLCJtb2RlbHMiLCJVc2VyU2NoZW1hIiwidXNlcm5hbWUiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJ1bmlxdWUiLCJtYXRjaCIsIm5hbWUiLCJ0cmltIiwiZW1haWwiLCJsb3dlcmNhc2UiLCJwYXNzd29yZCIsInNlbGVjdCIsImltYWdlIiwicm9sZSIsImVudW0iLCJkZWZhdWx0IiwiYmlvIiwibWF4bGVuZ3RoIiwicHJlZmVyZW5jZXMiLCJPYmplY3QiLCJoYXNDb21wbGV0ZWRPbmJvYXJkaW5nIiwiQm9vbGVhbiIsInBsYW4iLCJwcm9tcHRDb3VudCIsIk51bWJlciIsIm1pbiIsInN0cmlwZUN1c3RvbWVySWQiLCJpbmRleCIsInRpbWVzdGFtcHMiLCJVc2VyIiwibW9kZWwiLCJ2YWxpZGF0ZVVzZXIiLCJkYXRhIiwiZXJyb3JzIiwibGVuZ3RoIiwidGVzdCIsImluY2x1ZGVzIiwic3RhcnRzV2l0aCIsImVuZHNXaXRoIiwidW5kZWZpbmVkIiwiaXNWYWxpZCIsImtleXMiLCJzYW5pdGl6ZVVzZXIiLCJ1c2VyIiwidXNlck9iamVjdCIsInRvT2JqZWN0IiwiX192Iiwic2FuaXRpemVkVXNlciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./models/user.js\n");

/***/ }),

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fteams&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cteams%5Cindex.js&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fteams&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cteams%5Cindex.js&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_teams_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\teams\\index.js */ \"(api-node)/./pages/api/teams/index.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_teams_index_js__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_teams_index_js__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/teams\",\n        pathname: \"/api/teams\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_teams_index_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGdGVhbXMmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyU1Q2FwaSU1Q3RlYW1zJTVDaW5kZXguanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ0U7QUFDMUQ7QUFDMEQ7QUFDMUQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLHNEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxzREFBUTtBQUNwQztBQUNPLHdCQUF3Qix5R0FBbUI7QUFDbEQ7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzXFxcXGFwaVxcXFx0ZWFtc1xcXFxpbmRleC5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCAnZGVmYXVsdCcpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgJ2NvbmZpZycpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvdGVhbXNcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS90ZWFtc1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6ICcnLFxuICAgICAgICBmaWxlbmFtZTogJydcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fteams&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cteams%5Cindex.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/teams/index.js":
/*!**********************************!*\
  !*** ./pages/api/teams/index.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../lib/auth */ \"(api-node)/./lib/auth.js\");\n/* harmony import */ var _models_team__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../models/team */ \"(api-node)/./models/team.js\");\n/* harmony import */ var _models_user__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../models/user */ \"(api-node)/./models/user.js\");\n/* harmony import */ var _lib_mongoose__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../lib/mongoose */ \"(api-node)/./lib/mongoose.js\");\n\n// Remove repository imports for now, interact with model directly\n// import {\n//   getAllTeams,\n//   getTeamsByUserId,\n//   createTeam,\n// } from '../../../lib/repositories/teamRepository';\n // Import the Mongoose model\n // Needed to fetch user details for members?\n // Import DB connector\n// Remove old validator import\n// import { validateTeam } from '../../../models/team';\n/**\r\n * API handler for team operations\r\n * \r\n * GET: Get all teams or teams for the current user\r\n * POST: Create a new team\r\n */ async function handler(req, res) {\n    const { method } = req;\n    switch(method){\n        case 'GET':\n            return getTeams(req, res);\n        case 'POST':\n            return createTeamHandler(req, res);\n        default:\n            res.setHeader('Allow', [\n                'GET',\n                'POST'\n            ]);\n            return res.status(405).end(`Method ${method} Not Allowed`);\n    }\n}\n/**\r\n * Get teams based on request parameters\r\n * If userId is provided, return teams for that user\r\n * Otherwise return all teams (admin only)\r\n */ async function getTeams(req, res) {\n    const { userId: queryUserId } = req.query; // Rename to avoid conflict with sessionUserId\n    const sessionUserId = req.session?.sub;\n    try {\n        await (0,_lib_mongoose__WEBPACK_IMPORTED_MODULE_3__[\"default\"])();\n        let teams;\n        const targetUserId = queryUserId || sessionUserId;\n        if (targetUserId) {\n            // Fetch teams where the target user is a member\n            teams = await _models_team__WEBPACK_IMPORTED_MODULE_1__[\"default\"].find({\n                'members.user': targetUserId\n            }).populate('creator', 'name email').populate('members.user', 'name email');\n        } else {\n            // If no user context, maybe return public teams or require admin role?\n            // For now, return empty if no user context.\n            teams = [];\n        }\n        return res.status(200).json(teams);\n    } catch (error) {\n        console.error('Error fetching teams:', error);\n        return res.status(500).json({\n            message: 'Failed to fetch teams'\n        });\n    }\n}\n/**\r\n * Create a new team\r\n */ async function createTeamHandler(req, res) {\n    const sessionUserId = req.session?.sub;\n    if (!sessionUserId) {\n        return res.status(401).json({\n            message: 'Authentication required'\n        });\n    }\n    try {\n        await (0,_lib_mongoose__WEBPACK_IMPORTED_MODULE_3__[\"default\"])();\n        // Data from request body\n        const { name, description } = req.body;\n        // Create new team instance (Mongoose will validate based on schema)\n        const newTeam = new _models_team__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n            name,\n            description,\n            creator: sessionUserId\n        });\n        // Save the team (triggers pre-save hook and validation)\n        const savedTeam = await newTeam.save();\n        // Populate creator and member details before sending response\n        const populatedTeam = await _models_team__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findById(savedTeam._id).populate('creator', 'name email').populate('members.user', 'name email');\n        return res.status(201).json(populatedTeam);\n    } catch (error) {\n        console.error('Error creating team:', error);\n        if (error.name === 'ValidationError') {\n            // Extract Mongoose validation errors\n            const errors = Object.values(error.errors).map((el)=>el.message);\n            return res.status(400).json({\n                message: 'Validation failed',\n                errors\n            });\n        }\n        return res.status(500).json({\n            message: 'Failed to create team'\n        });\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_lib_auth__WEBPACK_IMPORTED_MODULE_0__.withAuth)(handler));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUVHLEdBQUcsQ0FBQ0MsQ0FBQUEsS0FBTUEsR0FBR2YsT0FBTztZQUMvRCxPQUFPcEIsSUFBSUssTUFBTSxDQUFDLEtBQUtZLElBQUksQ0FBQztnQkFBRUcsU0FBUztnQkFBcUJXO1lBQU87UUFDckU7UUFDQSxPQUFPL0IsSUFBSUssTUFBTSxDQUFDLEtBQUtZLElBQUksQ0FBQztZQUFFRyxTQUFTO1FBQXdCO0lBQ2pFO0FBQ0Y7QUFFQSxpRUFBZTFCLG1EQUFRQSxDQUFDSSxRQUFRQSxFQUFDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGJhdWRpXFxPbmVEcml2ZVxcRGVza3RvcFxcUHJvbXB0UHJvXFxQcm9tcHRQcm9cXHBhZ2VzXFxhcGlcXHRlYW1zXFxpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB3aXRoQXV0aCB9IGZyb20gJy4uLy4uLy4uL2xpYi9hdXRoJztcclxuLy8gUmVtb3ZlIHJlcG9zaXRvcnkgaW1wb3J0cyBmb3Igbm93LCBpbnRlcmFjdCB3aXRoIG1vZGVsIGRpcmVjdGx5XHJcbi8vIGltcG9ydCB7XHJcbi8vICAgZ2V0QWxsVGVhbXMsXHJcbi8vICAgZ2V0VGVhbXNCeVVzZXJJZCxcclxuLy8gICBjcmVhdGVUZWFtLFxyXG4vLyB9IGZyb20gJy4uLy4uLy4uL2xpYi9yZXBvc2l0b3JpZXMvdGVhbVJlcG9zaXRvcnknO1xyXG5pbXBvcnQgVGVhbSBmcm9tICcuLi8uLi8uLi9tb2RlbHMvdGVhbSc7IC8vIEltcG9ydCB0aGUgTW9uZ29vc2UgbW9kZWxcclxuaW1wb3J0IFVzZXIgZnJvbSAnLi4vLi4vLi4vbW9kZWxzL3VzZXInOyAvLyBOZWVkZWQgdG8gZmV0Y2ggdXNlciBkZXRhaWxzIGZvciBtZW1iZXJzP1xyXG5pbXBvcnQgY29ubmVjdERCIGZyb20gJy4uLy4uLy4uL2xpYi9tb25nb29zZSc7IC8vIEltcG9ydCBEQiBjb25uZWN0b3JcclxuLy8gUmVtb3ZlIG9sZCB2YWxpZGF0b3IgaW1wb3J0XHJcbi8vIGltcG9ydCB7IHZhbGlkYXRlVGVhbSB9IGZyb20gJy4uLy4uLy4uL21vZGVscy90ZWFtJztcclxuXHJcbi8qKlxyXG4gKiBBUEkgaGFuZGxlciBmb3IgdGVhbSBvcGVyYXRpb25zXHJcbiAqIFxyXG4gKiBHRVQ6IEdldCBhbGwgdGVhbXMgb3IgdGVhbXMgZm9yIHRoZSBjdXJyZW50IHVzZXJcclxuICogUE9TVDogQ3JlYXRlIGEgbmV3IHRlYW1cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcclxuICBjb25zdCB7IG1ldGhvZCB9ID0gcmVxO1xyXG4gIFxyXG4gIHN3aXRjaCAobWV0aG9kKSB7XHJcbiAgICBjYXNlICdHRVQnOlxyXG4gICAgICByZXR1cm4gZ2V0VGVhbXMocmVxLCByZXMpO1xyXG4gICAgY2FzZSAnUE9TVCc6XHJcbiAgICAgIHJldHVybiBjcmVhdGVUZWFtSGFuZGxlcihyZXEsIHJlcyk7XHJcbiAgICBkZWZhdWx0OlxyXG4gICAgICByZXMuc2V0SGVhZGVyKCdBbGxvdycsIFsnR0VUJywgJ1BPU1QnXSk7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuZW5kKGBNZXRob2QgJHttZXRob2R9IE5vdCBBbGxvd2VkYCk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogR2V0IHRlYW1zIGJhc2VkIG9uIHJlcXVlc3QgcGFyYW1ldGVyc1xyXG4gKiBJZiB1c2VySWQgaXMgcHJvdmlkZWQsIHJldHVybiB0ZWFtcyBmb3IgdGhhdCB1c2VyXHJcbiAqIE90aGVyd2lzZSByZXR1cm4gYWxsIHRlYW1zIChhZG1pbiBvbmx5KVxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZ2V0VGVhbXMocmVxLCByZXMpIHtcclxuICBjb25zdCB7IHVzZXJJZDogcXVlcnlVc2VySWQgfSA9IHJlcS5xdWVyeTsgLy8gUmVuYW1lIHRvIGF2b2lkIGNvbmZsaWN0IHdpdGggc2Vzc2lvblVzZXJJZFxyXG4gIGNvbnN0IHNlc3Npb25Vc2VySWQgPSByZXEuc2Vzc2lvbj8uc3ViO1xyXG5cclxuICB0cnkge1xyXG4gICAgYXdhaXQgY29ubmVjdERCKCk7XHJcbiAgICBsZXQgdGVhbXM7XHJcbiAgICBjb25zdCB0YXJnZXRVc2VySWQgPSBxdWVyeVVzZXJJZCB8fCBzZXNzaW9uVXNlcklkO1xyXG5cclxuICAgIGlmICh0YXJnZXRVc2VySWQpIHtcclxuICAgICAgLy8gRmV0Y2ggdGVhbXMgd2hlcmUgdGhlIHRhcmdldCB1c2VyIGlzIGEgbWVtYmVyXHJcbiAgICAgIHRlYW1zID0gYXdhaXQgVGVhbS5maW5kKHsgJ21lbWJlcnMudXNlcic6IHRhcmdldFVzZXJJZCB9KS5wb3B1bGF0ZSgnY3JlYXRvcicsICduYW1lIGVtYWlsJykucG9wdWxhdGUoJ21lbWJlcnMudXNlcicsICduYW1lIGVtYWlsJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBJZiBubyB1c2VyIGNvbnRleHQsIG1heWJlIHJldHVybiBwdWJsaWMgdGVhbXMgb3IgcmVxdWlyZSBhZG1pbiByb2xlP1xyXG4gICAgICAvLyBGb3Igbm93LCByZXR1cm4gZW1wdHkgaWYgbm8gdXNlciBjb250ZXh0LlxyXG4gICAgICB0ZWFtcyA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih0ZWFtcyk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHRlYW1zOicsIGVycm9yKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdGYWlsZWQgdG8gZmV0Y2ggdGVhbXMnIH0pO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZSBhIG5ldyB0ZWFtXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVUZWFtSGFuZGxlcihyZXEsIHJlcykge1xyXG4gIGNvbnN0IHNlc3Npb25Vc2VySWQgPSByZXEuc2Vzc2lvbj8uc3ViO1xyXG5cclxuICBpZiAoIXNlc3Npb25Vc2VySWQpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdBdXRoZW50aWNhdGlvbiByZXF1aXJlZCcgfSk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgYXdhaXQgY29ubmVjdERCKCk7XHJcblxyXG4gICAgLy8gRGF0YSBmcm9tIHJlcXVlc3QgYm9keVxyXG4gICAgY29uc3QgeyBuYW1lLCBkZXNjcmlwdGlvbiB9ID0gcmVxLmJvZHk7XHJcblxyXG4gICAgLy8gQ3JlYXRlIG5ldyB0ZWFtIGluc3RhbmNlIChNb25nb29zZSB3aWxsIHZhbGlkYXRlIGJhc2VkIG9uIHNjaGVtYSlcclxuICAgIGNvbnN0IG5ld1RlYW0gPSBuZXcgVGVhbSh7XHJcbiAgICAgIG5hbWUsXHJcbiAgICAgIGRlc2NyaXB0aW9uLFxyXG4gICAgICBjcmVhdG9yOiBzZXNzaW9uVXNlcklkLFxyXG4gICAgICAvLyBNZW1iZXJzIGFycmF5IGlzIGF1dG9tYXRpY2FsbHkgaGFuZGxlZCBieSB0aGUgcHJlLXNhdmUgaG9vayBpbiB0aGUgbW9kZWxcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFNhdmUgdGhlIHRlYW0gKHRyaWdnZXJzIHByZS1zYXZlIGhvb2sgYW5kIHZhbGlkYXRpb24pXHJcbiAgICBjb25zdCBzYXZlZFRlYW0gPSBhd2FpdCBuZXdUZWFtLnNhdmUoKTtcclxuXHJcbiAgICAvLyBQb3B1bGF0ZSBjcmVhdG9yIGFuZCBtZW1iZXIgZGV0YWlscyBiZWZvcmUgc2VuZGluZyByZXNwb25zZVxyXG4gICAgY29uc3QgcG9wdWxhdGVkVGVhbSA9IGF3YWl0IFRlYW0uZmluZEJ5SWQoc2F2ZWRUZWFtLl9pZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucG9wdWxhdGUoJ2NyZWF0b3InLCAnbmFtZSBlbWFpbCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBvcHVsYXRlKCdtZW1iZXJzLnVzZXInLCAnbmFtZSBlbWFpbCcpO1xyXG5cclxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMSkuanNvbihwb3B1bGF0ZWRUZWFtKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgdGVhbTonLCBlcnJvcik7XHJcbiAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ1ZhbGlkYXRpb25FcnJvcicpIHtcclxuICAgICAgLy8gRXh0cmFjdCBNb25nb29zZSB2YWxpZGF0aW9uIGVycm9yc1xyXG4gICAgICBjb25zdCBlcnJvcnMgPSBPYmplY3QudmFsdWVzKGVycm9yLmVycm9ycykubWFwKGVsID0+IGVsLm1lc3NhZ2UpO1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnVmFsaWRhdGlvbiBmYWlsZWQnLCBlcnJvcnMgfSk7XHJcbiAgICB9IFxyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0ZhaWxlZCB0byBjcmVhdGUgdGVhbScgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCB3aXRoQXV0aChoYW5kbGVyKTsiXSwibmFtZXMiOlsid2l0aEF1dGgiLCJUZWFtIiwiVXNlciIsImNvbm5lY3REQiIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJnZXRUZWFtcyIsImNyZWF0ZVRlYW1IYW5kbGVyIiwic2V0SGVhZGVyIiwic3RhdHVzIiwiZW5kIiwidXNlcklkIiwicXVlcnlVc2VySWQiLCJxdWVyeSIsInNlc3Npb25Vc2VySWQiLCJzZXNzaW9uIiwic3ViIiwidGVhbXMiLCJ0YXJnZXRVc2VySWQiLCJmaW5kIiwicG9wdWxhdGUiLCJqc29uIiwiZXJyb3IiLCJjb25zb2xlIiwibWVzc2FnZSIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsImJvZHkiLCJuZXdUZWFtIiwiY3JlYXRvciIsInNhdmVkVGVhbSIsInNhdmUiLCJwb3B1bGF0ZWRUZWFtIiwiZmluZEJ5SWQiLCJfaWQiLCJlcnJvcnMiLCJPYmplY3QiLCJ2YWx1ZXMiLCJtYXAiLCJlbCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/teams/index.js\n");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next-auth/jwt":
/*!********************************!*\
  !*** external "next-auth/jwt" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("next-auth/jwt");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fteams&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cteams%5Cindex.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();