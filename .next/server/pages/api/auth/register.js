"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/auth/register";
exports.ids = ["pages/api/auth/register"];
exports.modules = {

/***/ "(api-node)/./models/user.js":
/*!************************!*\
  !*** ./models/user.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   sanitizeUser: () => (/* binding */ sanitizeUser),\n/* harmony export */   validateUser: () => (/* binding */ validateUser)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\n// Define the User Schema using Mongoose\nconst UserSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    username: {\n        type: String,\n        required: [\n            true,\n            'Username is required.'\n        ],\n        unique: [\n            true,\n            'Username already exists.'\n        ],\n        match: [\n            /^(?=.{4,20}$)(?![_.])(?!.*[_.]{2})[a-zA-Z0-9._]+(?<![_.])$/,\n            \"Username invalid, it should contain 4-20 alphanumeric letters and be unique!\"\n        ] // Example regex validation\n    },\n    name: {\n        type: String,\n        required: [\n            true,\n            'Name is required.'\n        ]\n    },\n    email: {\n        type: String,\n        required: [\n            true,\n            'Email is required.'\n        ],\n        unique: [\n            true,\n            'Email already exists.'\n        ],\n        match: [\n            /\\S+@\\S+\\.\\S+/,\n            'Email is invalid.'\n        ] // Basic email format check\n    },\n    password: {\n        type: String,\n        required: [\n            true,\n            'Password is required.'\n        ],\n        select: false // Prevents password hash from being sent by default\n    },\n    image: {\n        type: String\n    },\n    role: {\n        type: String,\n        enum: [\n            'viewer',\n            'editor',\n            'admin'\n        ],\n        default: 'viewer' // Default role for new users\n    },\n    bio: {\n        type: String,\n        maxlength: 160 // Example constraint\n    },\n    preferences: {\n        type: Object // Or define a more specific sub-schema if needed\n    }\n}, {\n    timestamps: true\n}); // Enable automatic timestamps\n// Create the User model if it doesn't already exist\nconst User = mongoose__WEBPACK_IMPORTED_MODULE_0__.models.User || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('User', UserSchema);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (User);\n// Validation for user data (consider adapting to Mongoose validation or using alongside)\nconst validateUser = (data)=>{\n    const errors = {};\n    // Username validation\n    if (!data.username) {\n        errors.username = 'Username is required';\n    } else if (data.username.length < 4 || data.username.length > 20) {\n        errors.username = 'Username must be between 4 and 20 characters';\n    } // Add regex check if needed here too\n    // Name validation\n    if (!data.name) {\n        errors.name = 'Name is required';\n    } else if (data.name.length < 2) {\n        errors.name = 'Name must be at least 2 characters';\n    }\n    // Email validation\n    if (!data.email) {\n        errors.email = 'Email is required';\n    } else if (!/\\S+@\\S+\\.\\S+/.test(data.email)) {\n        errors.email = 'Email is invalid';\n    }\n    // Password validation (for input, not the hash)\n    // Note: Mongoose handles required check. This is for length etc. on signup.\n    if (data.password !== undefined) {\n        if (data.password.length < 8) {\n            errors.password = 'Password must be at least 8 characters';\n        }\n    }\n    return {\n        isValid: Object.keys(errors).length === 0,\n        errors\n    };\n};\n// Method to sanitize user data for client-side (remove sensitive info)\n// Adapt this if you fetch user data using Mongoose and need to hide fields\n// Mongoose 'select: false' on password helps, but this can be used for other fields\nconst sanitizeUser = (user)=>{\n    if (!user) return null;\n    // If user is a Mongoose document, convert to object first\n    const userObject = typeof user.toObject === 'function' ? user.toObject() : user;\n    const { password, __v, ...sanitizedUser } = userObject; // Remove password and __v\n    return sanitizedUser;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUtGO0lBRTNFLE1BQU0sRUFBRXRCLFFBQVEsRUFBRXlCLEdBQUcsRUFBRSxHQUFHQyxlQUFlLEdBQUdILFlBQVksMEJBQTBCO0lBQ2xGLE9BQU9HO0FBQ1QsRUFBRSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxiYXVkaVxcT25lRHJpdmVcXERlc2t0b3BcXFByb21wdFByb1xcUHJvbXB0UHJvXFxtb2RlbHNcXHVzZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlLCB7IFNjaGVtYSwgbW9kZWxzIH0gZnJvbSAnbW9uZ29vc2UnO1xuXG4vLyBEZWZpbmUgdGhlIFVzZXIgU2NoZW1hIHVzaW5nIE1vbmdvb3NlXG5jb25zdCBVc2VyU2NoZW1hID0gbmV3IFNjaGVtYSh7XG4gIHVzZXJuYW1lOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHJlcXVpcmVkOiBbdHJ1ZSwgJ1VzZXJuYW1lIGlzIHJlcXVpcmVkLiddLFxuICAgIHVuaXF1ZTogW3RydWUsICdVc2VybmFtZSBhbHJlYWR5IGV4aXN0cy4nXSxcbiAgICBtYXRjaDogWy9eKD89Lns0LDIwfSQpKD8hW18uXSkoPyEuKltfLl17Mn0pW2EtekEtWjAtOS5fXSsoPzwhW18uXSkkLywgXCJVc2VybmFtZSBpbnZhbGlkLCBpdCBzaG91bGQgY29udGFpbiA0LTIwIGFscGhhbnVtZXJpYyBsZXR0ZXJzIGFuZCBiZSB1bmlxdWUhXCJdIC8vIEV4YW1wbGUgcmVnZXggdmFsaWRhdGlvblxuICB9LFxuICBuYW1lOiB7IC8vIEtlZXBpbmcgJ25hbWUnIGZvciBkaXNwbGF5IHB1cnBvc2VzIHBvdGVudGlhbGx5XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHJlcXVpcmVkOiBbdHJ1ZSwgJ05hbWUgaXMgcmVxdWlyZWQuJ10sXG4gIH0sXG4gIGVtYWlsOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHJlcXVpcmVkOiBbdHJ1ZSwgJ0VtYWlsIGlzIHJlcXVpcmVkLiddLFxuICAgIHVuaXF1ZTogW3RydWUsICdFbWFpbCBhbHJlYWR5IGV4aXN0cy4nXSxcbiAgICBtYXRjaDogWy9cXFMrQFxcUytcXC5cXFMrLywgJ0VtYWlsIGlzIGludmFsaWQuJ10gLy8gQmFzaWMgZW1haWwgZm9ybWF0IGNoZWNrXG4gIH0sXG4gIHBhc3N3b3JkOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHJlcXVpcmVkOiBbdHJ1ZSwgJ1Bhc3N3b3JkIGlzIHJlcXVpcmVkLiddLCAvLyBXaWxsIHN0b3JlIHRoZSBoYXNoXG4gICAgc2VsZWN0OiBmYWxzZSAvLyBQcmV2ZW50cyBwYXNzd29yZCBoYXNoIGZyb20gYmVpbmcgc2VudCBieSBkZWZhdWx0XG4gIH0sXG4gIGltYWdlOiB7XG4gICAgdHlwZTogU3RyaW5nLCAvLyBVUkwgdG8gcHJvZmlsZSBpbWFnZVxuICB9LFxuICByb2xlOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGVudW06IFsndmlld2VyJywgJ2VkaXRvcicsICdhZG1pbiddLCAvLyBEZWZpbmUgYWxsb3dlZCByb2xlc1xuICAgIGRlZmF1bHQ6ICd2aWV3ZXInIC8vIERlZmF1bHQgcm9sZSBmb3IgbmV3IHVzZXJzXG4gIH0sXG4gIGJpbzoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgbWF4bGVuZ3RoOiAxNjAgLy8gRXhhbXBsZSBjb25zdHJhaW50XG4gIH0sXG4gIHByZWZlcmVuY2VzOiB7XG4gICAgICB0eXBlOiBPYmplY3QgLy8gT3IgZGVmaW5lIGEgbW9yZSBzcGVjaWZpYyBzdWItc2NoZW1hIGlmIG5lZWRlZFxuICB9XG4gIC8vIE1vbmdvb3NlIGF1dG9tYXRpY2FsbHkgYWRkcyBjcmVhdGVkQXQgYW5kIHVwZGF0ZWRBdFxufSwgeyB0aW1lc3RhbXBzOiB0cnVlIH0pOyAvLyBFbmFibGUgYXV0b21hdGljIHRpbWVzdGFtcHNcblxuLy8gQ3JlYXRlIHRoZSBVc2VyIG1vZGVsIGlmIGl0IGRvZXNuJ3QgYWxyZWFkeSBleGlzdFxuY29uc3QgVXNlciA9IG1vZGVscy5Vc2VyIHx8IG1vbmdvb3NlLm1vZGVsKCdVc2VyJywgVXNlclNjaGVtYSk7XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXI7XG5cbi8vIFZhbGlkYXRpb24gZm9yIHVzZXIgZGF0YSAoY29uc2lkZXIgYWRhcHRpbmcgdG8gTW9uZ29vc2UgdmFsaWRhdGlvbiBvciB1c2luZyBhbG9uZ3NpZGUpXG5leHBvcnQgY29uc3QgdmFsaWRhdGVVc2VyID0gKGRhdGEpID0+IHtcbiAgY29uc3QgZXJyb3JzID0ge307XG5cbiAgLy8gVXNlcm5hbWUgdmFsaWRhdGlvblxuICBpZiAoIWRhdGEudXNlcm5hbWUpIHtcbiAgICAgIGVycm9ycy51c2VybmFtZSA9ICdVc2VybmFtZSBpcyByZXF1aXJlZCc7XG4gIH0gZWxzZSBpZiAoZGF0YS51c2VybmFtZS5sZW5ndGggPCA0IHx8IGRhdGEudXNlcm5hbWUubGVuZ3RoID4gMjApIHtcbiAgICAgIGVycm9ycy51c2VybmFtZSA9ICdVc2VybmFtZSBtdXN0IGJlIGJldHdlZW4gNCBhbmQgMjAgY2hhcmFjdGVycyc7XG4gIH0gLy8gQWRkIHJlZ2V4IGNoZWNrIGlmIG5lZWRlZCBoZXJlIHRvb1xuXG4gIC8vIE5hbWUgdmFsaWRhdGlvblxuICBpZiAoIWRhdGEubmFtZSkge1xuICAgIGVycm9ycy5uYW1lID0gJ05hbWUgaXMgcmVxdWlyZWQnO1xuICB9IGVsc2UgaWYgKGRhdGEubmFtZS5sZW5ndGggPCAyKSB7XG4gICAgZXJyb3JzLm5hbWUgPSAnTmFtZSBtdXN0IGJlIGF0IGxlYXN0IDIgY2hhcmFjdGVycyc7XG4gIH1cblxuICAvLyBFbWFpbCB2YWxpZGF0aW9uXG4gIGlmICghZGF0YS5lbWFpbCkge1xuICAgIGVycm9ycy5lbWFpbCA9ICdFbWFpbCBpcyByZXF1aXJlZCc7XG4gIH0gZWxzZSBpZiAoIS9cXFMrQFxcUytcXC5cXFMrLy50ZXN0KGRhdGEuZW1haWwpKSB7XG4gICAgZXJyb3JzLmVtYWlsID0gJ0VtYWlsIGlzIGludmFsaWQnO1xuICB9XG5cbiAgLy8gUGFzc3dvcmQgdmFsaWRhdGlvbiAoZm9yIGlucHV0LCBub3QgdGhlIGhhc2gpXG4gIC8vIE5vdGU6IE1vbmdvb3NlIGhhbmRsZXMgcmVxdWlyZWQgY2hlY2suIFRoaXMgaXMgZm9yIGxlbmd0aCBldGMuIG9uIHNpZ251cC5cbiAgaWYgKGRhdGEucGFzc3dvcmQgIT09IHVuZGVmaW5lZCkge1xuICAgIGlmIChkYXRhLnBhc3N3b3JkLmxlbmd0aCA8IDgpIHtcbiAgICAgIGVycm9ycy5wYXNzd29yZCA9ICdQYXNzd29yZCBtdXN0IGJlIGF0IGxlYXN0IDggY2hhcmFjdGVycyc7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBpc1ZhbGlkOiBPYmplY3Qua2V5cyhlcnJvcnMpLmxlbmd0aCA9PT0gMCxcbiAgICBlcnJvcnNcbiAgfTtcbn07XG5cbi8vIE1ldGhvZCB0byBzYW5pdGl6ZSB1c2VyIGRhdGEgZm9yIGNsaWVudC1zaWRlIChyZW1vdmUgc2Vuc2l0aXZlIGluZm8pXG4vLyBBZGFwdCB0aGlzIGlmIHlvdSBmZXRjaCB1c2VyIGRhdGEgdXNpbmcgTW9uZ29vc2UgYW5kIG5lZWQgdG8gaGlkZSBmaWVsZHNcbi8vIE1vbmdvb3NlICdzZWxlY3Q6IGZhbHNlJyBvbiBwYXNzd29yZCBoZWxwcywgYnV0IHRoaXMgY2FuIGJlIHVzZWQgZm9yIG90aGVyIGZpZWxkc1xuZXhwb3J0IGNvbnN0IHNhbml0aXplVXNlciA9ICh1c2VyKSA9PiB7XG4gIGlmICghdXNlcikgcmV0dXJuIG51bGw7XG5cbiAgLy8gSWYgdXNlciBpcyBhIE1vbmdvb3NlIGRvY3VtZW50LCBjb252ZXJ0IHRvIG9iamVjdCBmaXJzdFxuICBjb25zdCB1c2VyT2JqZWN0ID0gdHlwZW9mIHVzZXIudG9PYmplY3QgPT09ICdmdW5jdGlvbicgPyB1c2VyLnRvT2JqZWN0KCkgOiB1c2VyO1xuXG4gIGNvbnN0IHsgcGFzc3dvcmQsIF9fdiwgLi4uc2FuaXRpemVkVXNlciB9ID0gdXNlck9iamVjdDsgLy8gUmVtb3ZlIHBhc3N3b3JkIGFuZCBfX3ZcbiAgcmV0dXJuIHNhbml0aXplZFVzZXI7XG59OyJdLCJuYW1lcyI6WyJtb25nb29zZSIsIlNjaGVtYSIsIm1vZGVscyIsIlVzZXJTY2hlbWEiLCJ1c2VybmFtZSIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsInVuaXF1ZSIsIm1hdGNoIiwibmFtZSIsImVtYWlsIiwicGFzc3dvcmQiLCJzZWxlY3QiLCJpbWFnZSIsInJvbGUiLCJlbnVtIiwiZGVmYXVsdCIsImJpbyIsIm1heGxlbmd0aCIsInByZWZlcmVuY2VzIiwiT2JqZWN0IiwidGltZXN0YW1wcyIsIlVzZXIiLCJtb2RlbCIsInZhbGlkYXRlVXNlciIsImRhdGEiLCJlcnJvcnMiLCJsZW5ndGgiLCJ0ZXN0IiwidW5kZWZpbmVkIiwiaXNWYWxpZCIsImtleXMiLCJzYW5pdGl6ZVVzZXIiLCJ1c2VyIiwidXNlck9iamVjdCIsInRvT2JqZWN0IiwiX192Iiwic2FuaXRpemVkVXNlciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./models/user.js\n");

/***/ }),

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fregister&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cauth%5Cregister.js&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fregister&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cauth%5Cregister.js&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_auth_register_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\auth\\register.js */ \"(api-node)/./pages/api/auth/register.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_auth_register_js__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_auth_register_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_auth_register_js__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_auth_register_js__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/auth/register\",\n        pathname: \"/api/auth/register\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_auth_register_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGYXV0aCUyRnJlZ2lzdGVyJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlNUNhcGklNUNhdXRoJTVDcmVnaXN0ZXIuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ0U7QUFDMUQ7QUFDNEQ7QUFDNUQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLHdEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyx3REFBUTtBQUNwQztBQUNPLHdCQUF3Qix5R0FBbUI7QUFDbEQ7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzXFxcXGFwaVxcXFxhdXRoXFxcXHJlZ2lzdGVyLmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsICdkZWZhdWx0Jyk7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCAnY29uZmlnJyk7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hdXRoL3JlZ2lzdGVyXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYXV0aC9yZWdpc3RlclwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6ICcnLFxuICAgICAgICBmaWxlbmFtZTogJydcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fregister&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cauth%5Cregister.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/auth/register.js":
/*!************************************!*\
  !*** ./pages/api/auth/register.js ***!
  \************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcryptjs */ \"bcryptjs\");\n/* harmony import */ var _models_user__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../models/user */ \"(api-node)/./models/user.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([bcryptjs__WEBPACK_IMPORTED_MODULE_1__]);\nbcryptjs__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n // Adjust path if needed\n // Import the validator\n// Simple Mongoose connection helper (you might move this to a separate lib file)\n// Caches the connection promise\nlet connectionPromise = null;\nconst connectDB = async ()=>{\n    if (connectionPromise) {\n        return connectionPromise;\n    }\n    if (!process.env.MONGODB_URI) {\n        throw new Error('Please define the MONGODB_URI environment variable inside .env.local');\n    }\n    connectionPromise = mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(process.env.MONGODB_URI, {\n        dbName: process.env.MONGODB_DB || 'PromptPro',\n        // These options are generally recommended but check Mongoose docs for latest\n        useNewUrlParser: true,\n        useUnifiedTopology: true\n    }).then((mongooseInstance)=>{\n        console.log(\"Mongoose connected successfully.\");\n        return mongooseInstance;\n    }).catch((err)=>{\n        console.error(\"Mongoose connection error:\", err);\n        connectionPromise = null; // Reset promise on error\n        throw err; // Re-throw error to be caught by handler\n    });\n    return connectionPromise;\n};\nasync function handler(req, res) {\n    if (req.method !== 'POST') {\n        res.setHeader('Allow', [\n            'POST'\n        ]);\n        return res.status(405).json({\n            message: `Method ${req.method} Not Allowed`\n        });\n    }\n    try {\n        await connectDB();\n        const { username, name, email, password } = req.body;\n        // --- Input Validation --- \n        // 1. Basic presence check\n        if (!username || !name || !email || !password) {\n            return res.status(400).json({\n                message: 'Missing required fields: username, name, email, password'\n            });\n        }\n        // 2. Use the validateUser function for length/format checks (optional, Mongoose also validates)\n        const { isValid, errors } = (0,_models_user__WEBPACK_IMPORTED_MODULE_2__.validateUser)({\n            username,\n            name,\n            email,\n            password\n        });\n        if (!isValid) {\n            // Return the first error found for simplicity, or could return all\n            const firstErrorKey = Object.keys(errors)[0];\n            return res.status(400).json({\n                message: errors[firstErrorKey]\n            });\n        }\n        // --- Check if user already exists (redundant with unique index, but good practice) ---\n        // Note: Mongoose unique index error handling is done in the catch block\n        const existingUser = await _models_user__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findOne({\n            $or: [\n                {\n                    email: email.toLowerCase()\n                },\n                {\n                    username\n                }\n            ]\n        }).lean(); // lean() for faster read\n        if (existingUser) {\n            if (existingUser.email === email.toLowerCase()) {\n                return res.status(409).json({\n                    message: 'Email already in use.'\n                });\n            }\n            if (existingUser.username === username) {\n                return res.status(409).json({\n                    message: 'Username already taken.'\n                });\n            }\n        }\n        // --- Hash Password --- \n        const saltRounds = 10;\n        const hashedPassword = await bcryptjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"].hash(password, saltRounds);\n        // --- Create User --- \n        const newUser = new _models_user__WEBPACK_IMPORTED_MODULE_2__[\"default\"]({\n            username,\n            name,\n            email: email.toLowerCase(),\n            password: hashedPassword\n        });\n        await newUser.save();\n        // --- Respond --- \n        // Avoid sending back the password hash or full user object on register\n        return res.status(201).json({\n            message: 'User registered successfully.'\n        });\n    } catch (error) {\n        console.error('Registration Error:', error);\n        // Handle Mongoose validation errors\n        if (error.name === 'ValidationError') {\n            // Extract a user-friendly message from the Mongoose error\n            const messages = Object.values(error.errors).map((err)=>err.message);\n            return res.status(400).json({\n                message: messages.join(', ') || 'Validation failed.'\n            });\n        }\n        // Handle duplicate key errors (e.g., unique username/email constraint)\n        if (error.code === 11000) {\n            let message = 'Duplicate key error.';\n            if (error.keyPattern?.email) {\n                message = 'Email already in use.';\n            } else if (error.keyPattern?.username) {\n                message = 'Username already taken.';\n            }\n            return res.status(409).json({\n                message\n            });\n        }\n        // Generic server error\n        return res.status(500).json({\n            message: 'Internal Server Error'\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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c2t0b3BcXFByb21wdFByb1xcUHJvbXB0UHJvXFxwYWdlc1xcYXBpXFxhdXRoXFxyZWdpc3Rlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xyXG5pbXBvcnQgYmNyeXB0IGZyb20gJ2JjcnlwdGpzJztcclxuaW1wb3J0IFVzZXIgZnJvbSAnLi4vLi4vLi4vbW9kZWxzL3VzZXInOyAvLyBBZGp1c3QgcGF0aCBpZiBuZWVkZWRcclxuaW1wb3J0IHsgdmFsaWRhdGVVc2VyIH0gZnJvbSAnLi4vLi4vLi4vbW9kZWxzL3VzZXInOyAvLyBJbXBvcnQgdGhlIHZhbGlkYXRvclxyXG5cclxuLy8gU2ltcGxlIE1vbmdvb3NlIGNvbm5lY3Rpb24gaGVscGVyICh5b3UgbWlnaHQgbW92ZSB0aGlzIHRvIGEgc2VwYXJhdGUgbGliIGZpbGUpXHJcbi8vIENhY2hlcyB0aGUgY29ubmVjdGlvbiBwcm9taXNlXHJcbmxldCBjb25uZWN0aW9uUHJvbWlzZSA9IG51bGw7XHJcbmNvbnN0IGNvbm5lY3REQiA9IGFzeW5jICgpID0+IHtcclxuICBpZiAoY29ubmVjdGlvblByb21pc2UpIHtcclxuICAgIHJldHVybiBjb25uZWN0aW9uUHJvbWlzZTtcclxuICB9XHJcblxyXG4gIGlmICghcHJvY2Vzcy5lbnYuTU9OR09EQl9VUkkpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdQbGVhc2UgZGVmaW5lIHRoZSBNT05HT0RCX1VSSSBlbnZpcm9ubWVudCB2YXJpYWJsZSBpbnNpZGUgLmVudi5sb2NhbCcpO1xyXG4gIH1cclxuXHJcbiAgY29ubmVjdGlvblByb21pc2UgPSBtb25nb29zZS5jb25uZWN0KHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJLCB7XHJcbiAgICAgIGRiTmFtZTogcHJvY2Vzcy5lbnYuTU9OR09EQl9EQiB8fCAnUHJvbXB0UHJvJywgLy8gVXNlIHNwZWNpZmljIERCIG5hbWUgb3IgZGVmYXVsdFxyXG4gICAgICAvLyBUaGVzZSBvcHRpb25zIGFyZSBnZW5lcmFsbHkgcmVjb21tZW5kZWQgYnV0IGNoZWNrIE1vbmdvb3NlIGRvY3MgZm9yIGxhdGVzdFxyXG4gICAgICB1c2VOZXdVcmxQYXJzZXI6IHRydWUsXHJcbiAgICAgIHVzZVVuaWZpZWRUb3BvbG9neTogdHJ1ZSxcclxuICAgICAgLy8gdXNlQ3JlYXRlSW5kZXg6IHRydWUsIC8vIE5vdCBuZWVkZWQgaW4gTW9uZ29vc2UgNitcclxuICAgICAgLy8gdXNlRmluZEFuZE1vZGlmeTogZmFsc2UgLy8gTm90IG5lZWRlZCBpbiBNb25nb29zZSA2K1xyXG4gIH0pLnRoZW4oKG1vbmdvb3NlSW5zdGFuY2UpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coXCJNb25nb29zZSBjb25uZWN0ZWQgc3VjY2Vzc2Z1bGx5LlwiKTtcclxuICAgICAgcmV0dXJuIG1vbmdvb3NlSW5zdGFuY2U7XHJcbiAgfSkuY2F0Y2goZXJyID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIk1vbmdvb3NlIGNvbm5lY3Rpb24gZXJyb3I6XCIsIGVycik7XHJcbiAgICAgIGNvbm5lY3Rpb25Qcm9taXNlID0gbnVsbDsgLy8gUmVzZXQgcHJvbWlzZSBvbiBlcnJvclxyXG4gICAgICB0aHJvdyBlcnI7IC8vIFJlLXRocm93IGVycm9yIHRvIGJlIGNhdWdodCBieSBoYW5kbGVyXHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiBjb25uZWN0aW9uUHJvbWlzZTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcclxuICBpZiAocmVxLm1ldGhvZCAhPT0gJ1BPU1QnKSB7XHJcbiAgICByZXMuc2V0SGVhZGVyKCdBbGxvdycsIFsnUE9TVCddKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IG1lc3NhZ2U6IGBNZXRob2QgJHtyZXEubWV0aG9kfSBOb3QgQWxsb3dlZGAgfSk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgYXdhaXQgY29ubmVjdERCKCk7XHJcblxyXG4gICAgY29uc3QgeyB1c2VybmFtZSwgbmFtZSwgZW1haWwsIHBhc3N3b3JkIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICAvLyAtLS0gSW5wdXQgVmFsaWRhdGlvbiAtLS0gXHJcbiAgICAvLyAxLiBCYXNpYyBwcmVzZW5jZSBjaGVja1xyXG4gICAgaWYgKCF1c2VybmFtZSB8fCAhbmFtZSB8fCAhZW1haWwgfHwgIXBhc3N3b3JkKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ01pc3NpbmcgcmVxdWlyZWQgZmllbGRzOiB1c2VybmFtZSwgbmFtZSwgZW1haWwsIHBhc3N3b3JkJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyAyLiBVc2UgdGhlIHZhbGlkYXRlVXNlciBmdW5jdGlvbiBmb3IgbGVuZ3RoL2Zvcm1hdCBjaGVja3MgKG9wdGlvbmFsLCBNb25nb29zZSBhbHNvIHZhbGlkYXRlcylcclxuICAgIGNvbnN0IHsgaXNWYWxpZCwgZXJyb3JzIH0gPSB2YWxpZGF0ZVVzZXIoeyB1c2VybmFtZSwgbmFtZSwgZW1haWwsIHBhc3N3b3JkIH0pO1xyXG4gICAgaWYgKCFpc1ZhbGlkKSB7XHJcbiAgICAgICAgLy8gUmV0dXJuIHRoZSBmaXJzdCBlcnJvciBmb3VuZCBmb3Igc2ltcGxpY2l0eSwgb3IgY291bGQgcmV0dXJuIGFsbFxyXG4gICAgICAgIGNvbnN0IGZpcnN0RXJyb3JLZXkgPSBPYmplY3Qua2V5cyhlcnJvcnMpWzBdO1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IGVycm9yc1tmaXJzdEVycm9yS2V5XSB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0gQ2hlY2sgaWYgdXNlciBhbHJlYWR5IGV4aXN0cyAocmVkdW5kYW50IHdpdGggdW5pcXVlIGluZGV4LCBidXQgZ29vZCBwcmFjdGljZSkgLS0tXHJcbiAgICAvLyBOb3RlOiBNb25nb29zZSB1bmlxdWUgaW5kZXggZXJyb3IgaGFuZGxpbmcgaXMgZG9uZSBpbiB0aGUgY2F0Y2ggYmxvY2tcclxuICAgIGNvbnN0IGV4aXN0aW5nVXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7ICRvcjogW3sgZW1haWw6IGVtYWlsLnRvTG93ZXJDYXNlKCkgfSwgeyB1c2VybmFtZSB9XSB9KS5sZWFuKCk7IC8vIGxlYW4oKSBmb3IgZmFzdGVyIHJlYWRcclxuICAgIGlmIChleGlzdGluZ1VzZXIpIHtcclxuICAgICAgICBpZiAoZXhpc3RpbmdVc2VyLmVtYWlsID09PSBlbWFpbC50b0xvd2VyQ2FzZSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwOSkuanNvbih7IG1lc3NhZ2U6ICdFbWFpbCBhbHJlYWR5IGluIHVzZS4nIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZXhpc3RpbmdVc2VyLnVzZXJuYW1lID09PSB1c2VybmFtZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDkpLmpzb24oeyBtZXNzYWdlOiAnVXNlcm5hbWUgYWxyZWFkeSB0YWtlbi4nIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0gSGFzaCBQYXNzd29yZCAtLS0gXHJcbiAgICBjb25zdCBzYWx0Um91bmRzID0gMTA7XHJcbiAgICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKHBhc3N3b3JkLCBzYWx0Um91bmRzKTtcclxuXHJcbiAgICAvLyAtLS0gQ3JlYXRlIFVzZXIgLS0tIFxyXG4gICAgY29uc3QgbmV3VXNlciA9IG5ldyBVc2VyKHtcclxuICAgICAgdXNlcm5hbWUsXHJcbiAgICAgIG5hbWUsXHJcbiAgICAgIGVtYWlsOiBlbWFpbC50b0xvd2VyQ2FzZSgpLCAvLyBTdG9yZSBlbWFpbCBjb25zaXN0ZW50bHlcclxuICAgICAgcGFzc3dvcmQ6IGhhc2hlZFBhc3N3b3JkLFxyXG4gICAgICAvLyByb2xlIHdpbGwgdXNlIHRoZSBkZWZhdWx0ICgndmlld2VyJykgZGVmaW5lZCBpbiB0aGUgc2NoZW1hXHJcbiAgICB9KTtcclxuXHJcbiAgICBhd2FpdCBuZXdVc2VyLnNhdmUoKTtcclxuXHJcbiAgICAvLyAtLS0gUmVzcG9uZCAtLS0gXHJcbiAgICAvLyBBdm9pZCBzZW5kaW5nIGJhY2sgdGhlIHBhc3N3b3JkIGhhc2ggb3IgZnVsbCB1c2VyIG9iamVjdCBvbiByZWdpc3RlclxyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAxKS5qc29uKHsgbWVzc2FnZTogJ1VzZXIgcmVnaXN0ZXJlZCBzdWNjZXNzZnVsbHkuJ30pO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignUmVnaXN0cmF0aW9uIEVycm9yOicsIGVycm9yKTtcclxuXHJcbiAgICAvLyBIYW5kbGUgTW9uZ29vc2UgdmFsaWRhdGlvbiBlcnJvcnNcclxuICAgIGlmIChlcnJvci5uYW1lID09PSAnVmFsaWRhdGlvbkVycm9yJykge1xyXG4gICAgICAgIC8vIEV4dHJhY3QgYSB1c2VyLWZyaWVuZGx5IG1lc3NhZ2UgZnJvbSB0aGUgTW9uZ29vc2UgZXJyb3JcclxuICAgICAgICBjb25zdCBtZXNzYWdlcyA9IE9iamVjdC52YWx1ZXMoZXJyb3IuZXJyb3JzKS5tYXAoZXJyID0+IGVyci5tZXNzYWdlKTtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBtZXNzYWdlcy5qb2luKCcsICcpIHx8ICdWYWxpZGF0aW9uIGZhaWxlZC4nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEhhbmRsZSBkdXBsaWNhdGUga2V5IGVycm9ycyAoZS5nLiwgdW5pcXVlIHVzZXJuYW1lL2VtYWlsIGNvbnN0cmFpbnQpXHJcbiAgICBpZiAoZXJyb3IuY29kZSA9PT0gMTEwMDApIHtcclxuICAgICAgICBsZXQgbWVzc2FnZSA9ICdEdXBsaWNhdGUga2V5IGVycm9yLic7XHJcbiAgICAgICAgaWYgKGVycm9yLmtleVBhdHRlcm4/LmVtYWlsKSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2UgPSAnRW1haWwgYWxyZWFkeSBpbiB1c2UuJztcclxuICAgICAgICB9IGVsc2UgaWYgKGVycm9yLmtleVBhdHRlcm4/LnVzZXJuYW1lKSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2UgPSAnVXNlcm5hbWUgYWxyZWFkeSB0YWtlbi4nO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDkpLmpzb24oeyBtZXNzYWdlIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEdlbmVyaWMgc2VydmVyIGVycm9yXHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnSW50ZXJuYWwgU2VydmVyIEVycm9yJyB9KTtcclxuICB9XHJcbn0gIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiYmNyeXB0IiwiVXNlciIsInZhbGlkYXRlVXNlciIsImNvbm5lY3Rpb25Qcm9taXNlIiwiY29ubmVjdERCIiwicHJvY2VzcyIsImVudiIsIk1PTkdPREJfVVJJIiwiRXJyb3IiLCJjb25uZWN0IiwiZGJOYW1lIiwiTU9OR09EQl9EQiIsInVzZU5ld1VybFBhcnNlciIsInVzZVVuaWZpZWRUb3BvbG9neSIsInRoZW4iLCJtb25nb29zZUluc3RhbmNlIiwiY29uc29sZSIsImxvZyIsImNhdGNoIiwiZXJyIiwiZXJyb3IiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwic2V0SGVhZGVyIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJ1c2VybmFtZSIsIm5hbWUiLCJlbWFpbCIsInBhc3N3b3JkIiwiYm9keSIsImlzVmFsaWQiLCJlcnJvcnMiLCJmaXJzdEVycm9yS2V5IiwiT2JqZWN0Iiwia2V5cyIsImV4aXN0aW5nVXNlciIsImZpbmRPbmUiLCIkb3IiLCJ0b0xvd2VyQ2FzZSIsImxlYW4iLCJzYWx0Um91bmRzIiwiaGFzaGVkUGFzc3dvcmQiLCJoYXNoIiwibmV3VXNlciIsInNhdmUiLCJtZXNzYWdlcyIsInZhbHVlcyIsIm1hcCIsImpvaW4iLCJjb2RlIiwia2V5UGF0dGVybiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/auth/register.js\n");

/***/ }),

/***/ "bcryptjs":
/*!***************************!*\
  !*** external "bcryptjs" ***!
  \***************************/
/***/ ((module) => {

module.exports = import("bcryptjs");;

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fregister&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cauth%5Cregister.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();