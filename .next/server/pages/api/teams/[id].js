"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/teams/[id]";
exports.ids = ["pages/api/teams/[id]"];
exports.modules = {

/***/ "(api-node)/./lib/auth.js":
/*!*********************!*\
  !*** ./lib/auth.js ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getAuthSession: () => (/* binding */ getAuthSession),\n/* harmony export */   withAuth: () => (/* binding */ withAuth),\n/* harmony export */   withAuthForMethods: () => (/* binding */ withAuthForMethods)\n/* harmony export */ });\n/* harmony import */ var next_auth_jwt__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/jwt */ \"next-auth/jwt\");\n/* harmony import */ var next_auth_jwt__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth_jwt__WEBPACK_IMPORTED_MODULE_0__);\n\n/**\r\n * Check if the request is authenticated\r\n * @param {Object} req - The request object\r\n * @returns {Promise<Object|null>} - The user session or null if not authenticated\r\n */ async function getAuthSession(req) {\n    return await (0,next_auth_jwt__WEBPACK_IMPORTED_MODULE_0__.getToken)({\n        req,\n        secret: process.env.NEXTAUTH_SECRET\n    });\n}\n/**\r\n * Higher-order function that creates an API handler that requires authentication\r\n * @param {Function} handler - The API handler to protect\r\n * @returns {Function} - The protected API handler\r\n */ function withAuth(handler) {\n    return async (req, res)=>{\n        const session = await getAuthSession(req);\n        if (!session) {\n            return res.status(401).json({\n                error: \"Unauthorized\"\n            });\n        }\n        // Add the session to the request object\n        req.session = session;\n        // Also add a user property for compatibility\n        req.user = {\n            id: session.sub || session.id,\n            name: session.name,\n            email: session.email\n        };\n        // Call the original handler\n        return handler(req, res);\n    };\n}\n/**\r\n * Higher-order function that optionally requires authentication for certain methods\r\n * @param {Function} handler - The API handler \r\n * @param {Array} protectedMethods - HTTP methods that require authentication (e.g., ['POST', 'PUT', 'DELETE'])\r\n * @returns {Function} - The conditionally protected API handler\r\n */ function withAuthForMethods(handler, protectedMethods = [\n    'POST',\n    'PUT',\n    'DELETE'\n]) {\n    return async (req, res)=>{\n        // Check if the current method requires authentication\n        if (protectedMethods.includes(req.method)) {\n            const session = await getAuthSession(req);\n            if (!session) {\n                return res.status(401).json({\n                    error: \"Unauthorized\"\n                });\n            }\n            // Add the session to the request object\n            req.session = session;\n            // Also add a user property for compatibility\n            req.user = {\n                id: session.sub || session.id,\n                name: session.name,\n                email: session.email\n            };\n        }\n        // Call the original handler\n        return handler(req, res);\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL2xpYi9hdXRoLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXlDO0FBRXpDOzs7O0NBSUMsR0FDTSxlQUFlQyxlQUFlQyxHQUFHO0lBQ3RDLE9BQU8sTUFBTUYsdURBQVFBLENBQUM7UUFBRUU7UUFBS0MsUUFBUUMsUUFBUUMsR0FBRyxDQUFDQyxlQUFlO0lBQUM7QUFDbkU7QUFFQTs7OztDQUlDLEdBQ00sU0FBU0MsU0FBU0MsT0FBTztJQUM5QixPQUFPLE9BQU9OLEtBQUtPO1FBQ2pCLE1BQU1DLFVBQVUsTUFBTVQsZUFBZUM7UUFFckMsSUFBSSxDQUFDUSxTQUFTO1lBQ1osT0FBT0QsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsT0FBTztZQUFlO1FBQ3REO1FBRUEsd0NBQXdDO1FBQ3hDWCxJQUFJUSxPQUFPLEdBQUdBO1FBRWQsNkNBQTZDO1FBQzdDUixJQUFJWSxJQUFJLEdBQUc7WUFDVEMsSUFBSUwsUUFBUU0sR0FBRyxJQUFJTixRQUFRSyxFQUFFO1lBQzdCRSxNQUFNUCxRQUFRTyxJQUFJO1lBQ2xCQyxPQUFPUixRQUFRUSxLQUFLO1FBQ3RCO1FBRUEsNEJBQTRCO1FBQzVCLE9BQU9WLFFBQVFOLEtBQUtPO0lBQ3RCO0FBQ0Y7QUFFQTs7Ozs7Q0FLQyxHQUNNLFNBQVNVLG1CQUFtQlgsT0FBTyxFQUFFWSxtQkFBbUI7SUFBQztJQUFRO0lBQU87Q0FBUztJQUN0RixPQUFPLE9BQU9sQixLQUFLTztRQUNqQixzREFBc0Q7UUFDdEQsSUFBSVcsaUJBQWlCQyxRQUFRLENBQUNuQixJQUFJb0IsTUFBTSxHQUFHO1lBQ3pDLE1BQU1aLFVBQVUsTUFBTVQsZUFBZUM7WUFFckMsSUFBSSxDQUFDUSxTQUFTO2dCQUNaLE9BQU9ELElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7b0JBQUVDLE9BQU87Z0JBQWU7WUFDdEQ7WUFFQSx3Q0FBd0M7WUFDeENYLElBQUlRLE9BQU8sR0FBR0E7WUFFZCw2Q0FBNkM7WUFDN0NSLElBQUlZLElBQUksR0FBRztnQkFDVEMsSUFBSUwsUUFBUU0sR0FBRyxJQUFJTixRQUFRSyxFQUFFO2dCQUM3QkUsTUFBTVAsUUFBUU8sSUFBSTtnQkFDbEJDLE9BQU9SLFFBQVFRLEtBQUs7WUFDdEI7UUFDRjtRQUVBLDRCQUE0QjtRQUM1QixPQUFPVixRQUFRTixLQUFLTztJQUN0QjtBQUNGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGJhdWRpXFxPbmVEcml2ZVxcRGVza3RvcFxcUHJvbXB0UHJvXFxQcm9tcHRQcm9cXGxpYlxcYXV0aC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRUb2tlbiB9IGZyb20gXCJuZXh0LWF1dGgvand0XCI7XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgdGhlIHJlcXVlc3QgaXMgYXV0aGVudGljYXRlZFxyXG4gKiBAcGFyYW0ge09iamVjdH0gcmVxIC0gVGhlIHJlcXVlc3Qgb2JqZWN0XHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdHxudWxsPn0gLSBUaGUgdXNlciBzZXNzaW9uIG9yIG51bGwgaWYgbm90IGF1dGhlbnRpY2F0ZWRcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBdXRoU2Vzc2lvbihyZXEpIHtcclxuICByZXR1cm4gYXdhaXQgZ2V0VG9rZW4oeyByZXEsIHNlY3JldDogcHJvY2Vzcy5lbnYuTkVYVEFVVEhfU0VDUkVUIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogSGlnaGVyLW9yZGVyIGZ1bmN0aW9uIHRoYXQgY3JlYXRlcyBhbiBBUEkgaGFuZGxlciB0aGF0IHJlcXVpcmVzIGF1dGhlbnRpY2F0aW9uXHJcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXIgLSBUaGUgQVBJIGhhbmRsZXIgdG8gcHJvdGVjdFxyXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IC0gVGhlIHByb3RlY3RlZCBBUEkgaGFuZGxlclxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHdpdGhBdXRoKGhhbmRsZXIpIHtcclxuICByZXR1cm4gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0QXV0aFNlc3Npb24ocmVxKTtcclxuICAgIFxyXG4gICAgaWYgKCFzZXNzaW9uKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiBcIlVuYXV0aG9yaXplZFwiIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBBZGQgdGhlIHNlc3Npb24gdG8gdGhlIHJlcXVlc3Qgb2JqZWN0XHJcbiAgICByZXEuc2Vzc2lvbiA9IHNlc3Npb247XHJcbiAgICBcclxuICAgIC8vIEFsc28gYWRkIGEgdXNlciBwcm9wZXJ0eSBmb3IgY29tcGF0aWJpbGl0eVxyXG4gICAgcmVxLnVzZXIgPSB7XHJcbiAgICAgIGlkOiBzZXNzaW9uLnN1YiB8fCBzZXNzaW9uLmlkLFxyXG4gICAgICBuYW1lOiBzZXNzaW9uLm5hbWUsXHJcbiAgICAgIGVtYWlsOiBzZXNzaW9uLmVtYWlsXHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICAvLyBDYWxsIHRoZSBvcmlnaW5hbCBoYW5kbGVyXHJcbiAgICByZXR1cm4gaGFuZGxlcihyZXEsIHJlcyk7XHJcbiAgfTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEhpZ2hlci1vcmRlciBmdW5jdGlvbiB0aGF0IG9wdGlvbmFsbHkgcmVxdWlyZXMgYXV0aGVudGljYXRpb24gZm9yIGNlcnRhaW4gbWV0aG9kc1xyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyIC0gVGhlIEFQSSBoYW5kbGVyIFxyXG4gKiBAcGFyYW0ge0FycmF5fSBwcm90ZWN0ZWRNZXRob2RzIC0gSFRUUCBtZXRob2RzIHRoYXQgcmVxdWlyZSBhdXRoZW50aWNhdGlvbiAoZS5nLiwgWydQT1NUJywgJ1BVVCcsICdERUxFVEUnXSlcclxuICogQHJldHVybnMge0Z1bmN0aW9ufSAtIFRoZSBjb25kaXRpb25hbGx5IHByb3RlY3RlZCBBUEkgaGFuZGxlclxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHdpdGhBdXRoRm9yTWV0aG9kcyhoYW5kbGVyLCBwcm90ZWN0ZWRNZXRob2RzID0gWydQT1NUJywgJ1BVVCcsICdERUxFVEUnXSkge1xyXG4gIHJldHVybiBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIC8vIENoZWNrIGlmIHRoZSBjdXJyZW50IG1ldGhvZCByZXF1aXJlcyBhdXRoZW50aWNhdGlvblxyXG4gICAgaWYgKHByb3RlY3RlZE1ldGhvZHMuaW5jbHVkZXMocmVxLm1ldGhvZCkpIHtcclxuICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldEF1dGhTZXNzaW9uKHJlcSk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAoIXNlc3Npb24pIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogXCJVbmF1dGhvcml6ZWRcIiB9KTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8gQWRkIHRoZSBzZXNzaW9uIHRvIHRoZSByZXF1ZXN0IG9iamVjdFxyXG4gICAgICByZXEuc2Vzc2lvbiA9IHNlc3Npb247XHJcbiAgICAgIFxyXG4gICAgICAvLyBBbHNvIGFkZCBhIHVzZXIgcHJvcGVydHkgZm9yIGNvbXBhdGliaWxpdHlcclxuICAgICAgcmVxLnVzZXIgPSB7XHJcbiAgICAgICAgaWQ6IHNlc3Npb24uc3ViIHx8IHNlc3Npb24uaWQsXHJcbiAgICAgICAgbmFtZTogc2Vzc2lvbi5uYW1lLFxyXG4gICAgICAgIGVtYWlsOiBzZXNzaW9uLmVtYWlsXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIENhbGwgdGhlIG9yaWdpbmFsIGhhbmRsZXJcclxuICAgIHJldHVybiBoYW5kbGVyKHJlcSwgcmVzKTtcclxuICB9O1xyXG59Il0sIm5hbWVzIjpbImdldFRva2VuIiwiZ2V0QXV0aFNlc3Npb24iLCJyZXEiLCJzZWNyZXQiLCJwcm9jZXNzIiwiZW52IiwiTkVYVEFVVEhfU0VDUkVUIiwid2l0aEF1dGgiLCJoYW5kbGVyIiwicmVzIiwic2Vzc2lvbiIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsInVzZXIiLCJpZCIsInN1YiIsIm5hbWUiLCJlbWFpbCIsIndpdGhBdXRoRm9yTWV0aG9kcyIsInByb3RlY3RlZE1ldGhvZHMiLCJpbmNsdWRlcyIsIm1ldGhvZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./lib/auth.js\n");

/***/ }),

/***/ "(api-node)/./lib/mongoose.js":
/*!*************************!*\
  !*** ./lib/mongoose.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\n// Cache the connection promise to avoid reconnecting on every call\nlet connectionPromise = null;\nconst connectDB = async ()=>{\n    // If a connection promise exists, return it to reuse the connection\n    if (connectionPromise) {\n        // console.log(\"Using cached Mongoose connection\");\n        return connectionPromise;\n    }\n    // Check for MongoDB URI environment variable\n    if (!process.env.MONGODB_URI) {\n        throw new Error('Please define the MONGODB_URI environment variable inside .env.local');\n    }\n    // Create a new connection promise\n    console.log(\"Creating new Mongoose connection...\");\n    connectionPromise = mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(process.env.MONGODB_URI, {\n        dbName: process.env.MONGODB_DB || 'PromptPro',\n        // Recommended options (check Mongoose docs for latest)\n        useNewUrlParser: true,\n        useUnifiedTopology: true\n    }).then((mongooseInstance)=>{\n        console.log(\"Mongoose connected successfully.\");\n        return mongooseInstance; // The resolved value of the promise\n    }).catch((err)=>{\n        console.error(\"Mongoose connection error:\", err);\n        connectionPromise = null; // Reset promise on error so retry is possible\n        throw err; // Re-throw error to be caught by the calling function\n    });\n    return connectionPromise;\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (connectDB);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL2xpYi9tb25nb29zZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBZ0M7QUFFaEMsbUVBQW1FO0FBQ25FLElBQUlDLG9CQUFvQjtBQUV4QixNQUFNQyxZQUFZO0lBQ2hCLG9FQUFvRTtJQUNwRSxJQUFJRCxtQkFBbUI7UUFDckIsbURBQW1EO1FBQ25ELE9BQU9BO0lBQ1Q7SUFFQSw2Q0FBNkM7SUFDN0MsSUFBSSxDQUFDRSxRQUFRQyxHQUFHLENBQUNDLFdBQVcsRUFBRTtRQUM1QixNQUFNLElBQUlDLE1BQU07SUFDbEI7SUFFQSxrQ0FBa0M7SUFDbENDLFFBQVFDLEdBQUcsQ0FBQztJQUNaUCxvQkFBb0JELHVEQUFnQixDQUFDRyxRQUFRQyxHQUFHLENBQUNDLFdBQVcsRUFBRTtRQUM1REssUUFBUVAsUUFBUUMsR0FBRyxDQUFDTyxVQUFVLElBQUk7UUFDbEMsdURBQXVEO1FBQ3ZEQyxpQkFBaUI7UUFDakJDLG9CQUFvQjtJQUN0QixHQUFHQyxJQUFJLENBQUMsQ0FBQ0M7UUFDUFIsUUFBUUMsR0FBRyxDQUFDO1FBQ1osT0FBT08sa0JBQWtCLG9DQUFvQztJQUMvRCxHQUFHQyxLQUFLLENBQUNDLENBQUFBO1FBQ1BWLFFBQVFXLEtBQUssQ0FBQyw4QkFBOEJEO1FBQzVDaEIsb0JBQW9CLE1BQU0sOENBQThDO1FBQ3hFLE1BQU1nQixLQUFLLHNEQUFzRDtJQUNuRTtJQUVBLE9BQU9oQjtBQUNUO0FBRUEsaUVBQWVDLFNBQVNBLEVBQUMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYmF1ZGlcXE9uZURyaXZlXFxEZXNrdG9wXFxQcm9tcHRQcm9cXFByb21wdFByb1xcbGliXFxtb25nb29zZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xyXG5cclxuLy8gQ2FjaGUgdGhlIGNvbm5lY3Rpb24gcHJvbWlzZSB0byBhdm9pZCByZWNvbm5lY3Rpbmcgb24gZXZlcnkgY2FsbFxyXG5sZXQgY29ubmVjdGlvblByb21pc2UgPSBudWxsO1xyXG5cclxuY29uc3QgY29ubmVjdERCID0gYXN5bmMgKCkgPT4ge1xyXG4gIC8vIElmIGEgY29ubmVjdGlvbiBwcm9taXNlIGV4aXN0cywgcmV0dXJuIGl0IHRvIHJldXNlIHRoZSBjb25uZWN0aW9uXHJcbiAgaWYgKGNvbm5lY3Rpb25Qcm9taXNlKSB7XHJcbiAgICAvLyBjb25zb2xlLmxvZyhcIlVzaW5nIGNhY2hlZCBNb25nb29zZSBjb25uZWN0aW9uXCIpO1xyXG4gICAgcmV0dXJuIGNvbm5lY3Rpb25Qcm9taXNlO1xyXG4gIH1cclxuXHJcbiAgLy8gQ2hlY2sgZm9yIE1vbmdvREIgVVJJIGVudmlyb25tZW50IHZhcmlhYmxlXHJcbiAgaWYgKCFwcm9jZXNzLmVudi5NT05HT0RCX1VSSSkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdQbGVhc2UgZGVmaW5lIHRoZSBNT05HT0RCX1VSSSBlbnZpcm9ubWVudCB2YXJpYWJsZSBpbnNpZGUgLmVudi5sb2NhbCcpO1xyXG4gIH1cclxuXHJcbiAgLy8gQ3JlYXRlIGEgbmV3IGNvbm5lY3Rpb24gcHJvbWlzZVxyXG4gIGNvbnNvbGUubG9nKFwiQ3JlYXRpbmcgbmV3IE1vbmdvb3NlIGNvbm5lY3Rpb24uLi5cIik7XHJcbiAgY29ubmVjdGlvblByb21pc2UgPSBtb25nb29zZS5jb25uZWN0KHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJLCB7XHJcbiAgICBkYk5hbWU6IHByb2Nlc3MuZW52Lk1PTkdPREJfREIgfHwgJ1Byb21wdFBybycsIC8vIFVzZSBzcGVjaWZpYyBEQiBuYW1lIG9yIGRlZmF1bHRcclxuICAgIC8vIFJlY29tbWVuZGVkIG9wdGlvbnMgKGNoZWNrIE1vbmdvb3NlIGRvY3MgZm9yIGxhdGVzdClcclxuICAgIHVzZU5ld1VybFBhcnNlcjogdHJ1ZSxcclxuICAgIHVzZVVuaWZpZWRUb3BvbG9neTogdHJ1ZSxcclxuICB9KS50aGVuKChtb25nb29zZUluc3RhbmNlKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhcIk1vbmdvb3NlIGNvbm5lY3RlZCBzdWNjZXNzZnVsbHkuXCIpO1xyXG4gICAgcmV0dXJuIG1vbmdvb3NlSW5zdGFuY2U7IC8vIFRoZSByZXNvbHZlZCB2YWx1ZSBvZiB0aGUgcHJvbWlzZVxyXG4gIH0pLmNhdGNoKGVyciA9PiB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiTW9uZ29vc2UgY29ubmVjdGlvbiBlcnJvcjpcIiwgZXJyKTtcclxuICAgIGNvbm5lY3Rpb25Qcm9taXNlID0gbnVsbDsgLy8gUmVzZXQgcHJvbWlzZSBvbiBlcnJvciBzbyByZXRyeSBpcyBwb3NzaWJsZVxyXG4gICAgdGhyb3cgZXJyOyAvLyBSZS10aHJvdyBlcnJvciB0byBiZSBjYXVnaHQgYnkgdGhlIGNhbGxpbmcgZnVuY3Rpb25cclxuICB9KTtcclxuXHJcbiAgcmV0dXJuIGNvbm5lY3Rpb25Qcm9taXNlO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdERCOyAiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJjb25uZWN0aW9uUHJvbWlzZSIsImNvbm5lY3REQiIsInByb2Nlc3MiLCJlbnYiLCJNT05HT0RCX1VSSSIsIkVycm9yIiwiY29uc29sZSIsImxvZyIsImNvbm5lY3QiLCJkYk5hbWUiLCJNT05HT0RCX0RCIiwidXNlTmV3VXJsUGFyc2VyIiwidXNlVW5pZmllZFRvcG9sb2d5IiwidGhlbiIsIm1vbmdvb3NlSW5zdGFuY2UiLCJjYXRjaCIsImVyciIsImVycm9yIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./lib/mongoose.js\n");

/***/ }),

/***/ "(api-node)/./models/team.js":
/*!************************!*\
  !*** ./models/team.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n/**\n * Team data model and validation functions\n */ \n// Define default limits based on plan\nconst PLAN_LIMITS = {\n    Free: {\n        promptLimit: 50\n    },\n    Pro: {\n        promptLimit: 1000\n    }\n};\nconst MemberSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    user: {\n        type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.ObjectId,\n        ref: 'User',\n        required: true\n    },\n    role: {\n        type: String,\n        required: true,\n        enum: [\n            'owner',\n            'admin',\n            'member'\n        ],\n        default: 'member'\n    },\n    joinedAt: {\n        type: Date,\n        default: Date.now\n    }\n}, {\n    _id: false\n}); // No separate _id for members sub-document\nconst TeamSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    name: {\n        type: String,\n        required: [\n            true,\n            'Team name is required.'\n        ],\n        trim: true,\n        maxlength: [\n            100,\n            'Team name cannot exceed 100 characters.'\n        ]\n    },\n    description: {\n        type: String,\n        trim: true,\n        maxlength: [\n            500,\n            'Team description cannot exceed 500 characters.'\n        ]\n    },\n    creator: {\n        type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.ObjectId,\n        ref: 'User',\n        required: [\n            true,\n            'Team creator is required.'\n        ]\n    },\n    members: [\n        MemberSchema\n    ],\n    // --- Plan & Limits ---\n    plan: {\n        type: String,\n        enum: Object.keys(PLAN_LIMITS),\n        default: 'Free'\n    },\n    promptLimit: {\n        type: Number\n    },\n    // --- Stripe Integration Fields ---\n    stripeCustomerId: {\n        type: String,\n        index: true,\n        sparse: true // Allow null/undefined values in the index\n    },\n    stripeSubscriptionId: {\n        type: String,\n        index: true,\n        sparse: true\n    }\n}, {\n    timestamps: true // Automatically add createdAt and updatedAt\n});\n// --- Indexing ---\nTeamSchema.index({\n    name: 1\n});\n// Ensure efficient querying for members\nTeamSchema.index({\n    \"members.user\": 1\n});\nTeamSchema.index({\n    plan: 1\n}); // Index the plan field\n// --- Pre-save Hook ---\n// Automatically add the creator as the initial 'owner' member when a team is created\nTeamSchema.pre('save', function(next) {\n    // Set default members\n    if (this.isNew) {\n        if (!this.members) {\n            this.members = [];\n        }\n        const creatorExists = this.members.some((member)=>member.user.equals(this.creator));\n        if (!creatorExists) {\n            this.members.push({\n                user: this.creator,\n                role: 'owner'\n            });\n        }\n    }\n    // Set default promptLimit based on plan if not already set or if plan changes\n    if (this.isNew || this.isModified('plan')) {\n        const limits = PLAN_LIMITS[this.plan];\n        if (limits) {\n            this.promptLimit = limits.promptLimit;\n        }\n    }\n    next();\n});\n// --- Model Creation ---\n// Use 'Team' as the model name following Mongoose convention\nconst Team = mongoose__WEBPACK_IMPORTED_MODULE_0__.models.Team || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('Team', TeamSchema);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Team); /**\n * Team member schema\n * @typedef {Object} TeamMember\n * @property {string} userId - User ID\n * @property {string} role - Member role (owner, admin, member)\n * @property {string} joinedAt - Timestamp when member joined\n */  // Removed helper functions (validateTeam, sanitizeTeam, getMemberRole, isTeamAdmin, isTeamMember)\n // These have been moved to lib/teamUtils.js to avoid including Mongoose model code in the client bundle.\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL21vZGVscy90ZWFtLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOztDQUVDLEdBRW1EO0FBRXBELHNDQUFzQztBQUN0QyxNQUFNRyxjQUFjO0lBQ2xCQyxNQUFNO1FBQUVDLGFBQWE7SUFBRztJQUN4QkMsS0FBSztRQUFFRCxhQUFhO0lBQUs7QUFDM0I7QUFFQSxNQUFNRSxlQUFlLElBQUlOLDRDQUFNQSxDQUFDO0lBQzVCTyxNQUFNO1FBQ0ZDLE1BQU1SLDRDQUFNQSxDQUFDUyxLQUFLLENBQUNDLFFBQVE7UUFDM0JDLEtBQUs7UUFDTEMsVUFBVTtJQUNkO0lBQ0FDLE1BQU07UUFDRkwsTUFBTU07UUFDTkYsVUFBVTtRQUNWRyxNQUFNO1lBQUM7WUFBUztZQUFTO1NBQVM7UUFDbENDLFNBQVM7SUFDYjtJQUNBQyxVQUFVO1FBQ05ULE1BQU1VO1FBQ05GLFNBQVNFLEtBQUtDLEdBQUc7SUFDckI7QUFDSixHQUFHO0lBQUVDLEtBQUs7QUFBTSxJQUFJLDJDQUEyQztBQUUvRCxNQUFNQyxhQUFhLElBQUlyQiw0Q0FBTUEsQ0FBQztJQUMxQnNCLE1BQU07UUFDRmQsTUFBTU07UUFDTkYsVUFBVTtZQUFDO1lBQU07U0FBeUI7UUFDMUNXLE1BQU07UUFDTkMsV0FBVztZQUFDO1lBQUs7U0FBMEM7SUFDL0Q7SUFDQUMsYUFBYTtRQUNUakIsTUFBTU07UUFDTlMsTUFBTTtRQUNOQyxXQUFXO1lBQUM7WUFBSztTQUFpRDtJQUN0RTtJQUNBRSxTQUFTO1FBQ0xsQixNQUFNUiw0Q0FBTUEsQ0FBQ1MsS0FBSyxDQUFDQyxRQUFRO1FBQzNCQyxLQUFLO1FBQ0xDLFVBQVU7WUFBQztZQUFNO1NBQTRCO0lBQ2pEO0lBQ0FlLFNBQVM7UUFBQ3JCO0tBQWE7SUFDdkIsd0JBQXdCO0lBQ3hCc0IsTUFBTTtRQUNGcEIsTUFBTU07UUFDTkMsTUFBTWMsT0FBT0MsSUFBSSxDQUFDNUI7UUFDbEJjLFNBQVM7SUFDYjtJQUNBWixhQUFhO1FBQ1RJLE1BQU11QjtJQUVWO0lBQ0Esb0NBQW9DO0lBQ3BDQyxrQkFBa0I7UUFDZHhCLE1BQU1NO1FBQ05tQixPQUFPO1FBQ1BDLFFBQVEsS0FBSywyQ0FBMkM7SUFDNUQ7SUFDQUMsc0JBQXNCO1FBQ2xCM0IsTUFBTU07UUFDTm1CLE9BQU87UUFDUEMsUUFBUTtJQUNaO0FBRUosR0FBRztJQUNDRSxZQUFZLEtBQUssNENBQTRDO0FBQ2pFO0FBRUEsbUJBQW1CO0FBQ25CZixXQUFXWSxLQUFLLENBQUM7SUFBRVgsTUFBTTtBQUFFO0FBQzNCLHdDQUF3QztBQUN4Q0QsV0FBV1ksS0FBSyxDQUFDO0lBQUUsZ0JBQWdCO0FBQUU7QUFDckNaLFdBQVdZLEtBQUssQ0FBQztJQUFFTCxNQUFNO0FBQUUsSUFBSSx1QkFBdUI7QUFFdEQsd0JBQXdCO0FBQ3hCLHFGQUFxRjtBQUNyRlAsV0FBV2dCLEdBQUcsQ0FBQyxRQUFRLFNBQVNDLElBQUk7SUFDaEMsc0JBQXNCO0lBQ3RCLElBQUksSUFBSSxDQUFDQyxLQUFLLEVBQUU7UUFDWixJQUFJLENBQUMsSUFBSSxDQUFDWixPQUFPLEVBQUU7WUFDZixJQUFJLENBQUNBLE9BQU8sR0FBRyxFQUFFO1FBQ3JCO1FBQ0EsTUFBTWEsZ0JBQWdCLElBQUksQ0FBQ2IsT0FBTyxDQUFDYyxJQUFJLENBQUNDLENBQUFBLFNBQVVBLE9BQU9uQyxJQUFJLENBQUNvQyxNQUFNLENBQUMsSUFBSSxDQUFDakIsT0FBTztRQUNqRixJQUFJLENBQUNjLGVBQWU7WUFDaEIsSUFBSSxDQUFDYixPQUFPLENBQUNpQixJQUFJLENBQUM7Z0JBQUVyQyxNQUFNLElBQUksQ0FBQ21CLE9BQU87Z0JBQUViLE1BQU07WUFBUTtRQUMxRDtJQUNKO0lBRUEsOEVBQThFO0lBQzlFLElBQUksSUFBSSxDQUFDMEIsS0FBSyxJQUFJLElBQUksQ0FBQ00sVUFBVSxDQUFDLFNBQVM7UUFDdkMsTUFBTUMsU0FBUzVDLFdBQVcsQ0FBQyxJQUFJLENBQUMwQixJQUFJLENBQUM7UUFDckMsSUFBSWtCLFFBQVE7WUFDUixJQUFJLENBQUMxQyxXQUFXLEdBQUcwQyxPQUFPMUMsV0FBVztRQUN6QztJQUNKO0lBRUFrQztBQUNKO0FBR0EseUJBQXlCO0FBQ3pCLDZEQUE2RDtBQUM3RCxNQUFNUyxPQUFPOUMsNENBQU1BLENBQUM4QyxJQUFJLElBQUloRCxxREFBYyxDQUFDLFFBQVFzQjtBQUVuRCxpRUFBZTBCLElBQUlBLEVBQUMsQ0FFcEI7Ozs7OztDQU1DLElBRUQsa0dBQWtHO0NBQ2xHLHlHQUF5RyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxiYXVkaVxcT25lRHJpdmVcXERlc2t0b3BcXFByb21wdFByb1xcUHJvbXB0UHJvXFxtb2RlbHNcXHRlYW0uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUZWFtIGRhdGEgbW9kZWwgYW5kIHZhbGlkYXRpb24gZnVuY3Rpb25zXG4gKi9cblxuaW1wb3J0IG1vbmdvb3NlLCB7IFNjaGVtYSwgbW9kZWxzIH0gZnJvbSAnbW9uZ29vc2UnO1xuXG4vLyBEZWZpbmUgZGVmYXVsdCBsaW1pdHMgYmFzZWQgb24gcGxhblxuY29uc3QgUExBTl9MSU1JVFMgPSB7XG4gIEZyZWU6IHsgcHJvbXB0TGltaXQ6IDUwIH0sXG4gIFBybzogeyBwcm9tcHRMaW1pdDogMTAwMCB9XG59O1xuXG5jb25zdCBNZW1iZXJTY2hlbWEgPSBuZXcgU2NoZW1hKHtcbiAgICB1c2VyOiB7XG4gICAgICAgIHR5cGU6IFNjaGVtYS5UeXBlcy5PYmplY3RJZCxcbiAgICAgICAgcmVmOiAnVXNlcicsXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgfSxcbiAgICByb2xlOiB7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIGVudW06IFsnb3duZXInLCAnYWRtaW4nLCAnbWVtYmVyJ10sIC8vIERlZmluZSBhbGxvd2VkIHJvbGVzXG4gICAgICAgIGRlZmF1bHQ6ICdtZW1iZXInXG4gICAgfSxcbiAgICBqb2luZWRBdDoge1xuICAgICAgICB0eXBlOiBEYXRlLFxuICAgICAgICBkZWZhdWx0OiBEYXRlLm5vd1xuICAgIH1cbn0sIHsgX2lkOiBmYWxzZSB9KTsgLy8gTm8gc2VwYXJhdGUgX2lkIGZvciBtZW1iZXJzIHN1Yi1kb2N1bWVudFxuXG5jb25zdCBUZWFtU2NoZW1hID0gbmV3IFNjaGVtYSh7XG4gICAgbmFtZToge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIHJlcXVpcmVkOiBbdHJ1ZSwgJ1RlYW0gbmFtZSBpcyByZXF1aXJlZC4nXSxcbiAgICAgICAgdHJpbTogdHJ1ZSxcbiAgICAgICAgbWF4bGVuZ3RoOiBbMTAwLCAnVGVhbSBuYW1lIGNhbm5vdCBleGNlZWQgMTAwIGNoYXJhY3RlcnMuJ11cbiAgICB9LFxuICAgIGRlc2NyaXB0aW9uOiB7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgdHJpbTogdHJ1ZSxcbiAgICAgICAgbWF4bGVuZ3RoOiBbNTAwLCAnVGVhbSBkZXNjcmlwdGlvbiBjYW5ub3QgZXhjZWVkIDUwMCBjaGFyYWN0ZXJzLiddXG4gICAgfSxcbiAgICBjcmVhdG9yOiB7IC8vIENoYW5nZWQgZnJvbSB1c2VySWQgZm9yIGNsYXJpdHksIHJlcHJlc2VudHMgdGhlIGluaXRpYWwgb3duZXJcbiAgICAgICAgdHlwZTogU2NoZW1hLlR5cGVzLk9iamVjdElkLFxuICAgICAgICByZWY6ICdVc2VyJyxcbiAgICAgICAgcmVxdWlyZWQ6IFt0cnVlLCAnVGVhbSBjcmVhdG9yIGlzIHJlcXVpcmVkLiddXG4gICAgfSxcbiAgICBtZW1iZXJzOiBbTWVtYmVyU2NoZW1hXSwgLy8gQXJyYXkgb2YgbWVtYmVycyB3aXRoIHJvbGVzXG4gICAgLy8gLS0tIFBsYW4gJiBMaW1pdHMgLS0tXG4gICAgcGxhbjoge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIGVudW06IE9iamVjdC5rZXlzKFBMQU5fTElNSVRTKSwgLy8gVXNlIGtleXMgZnJvbSBQTEFOX0xJTUlUU1xuICAgICAgICBkZWZhdWx0OiAnRnJlZSdcbiAgICB9LFxuICAgIHByb21wdExpbWl0OiB7XG4gICAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgICAgLy8gRGVmYXVsdCBsaW1pdCBzZXQgYmFzZWQgb24gcGxhbiB2aWEgcHJlLXNhdmUgaG9va1xuICAgIH0sXG4gICAgLy8gLS0tIFN0cmlwZSBJbnRlZ3JhdGlvbiBGaWVsZHMgLS0tXG4gICAgc3RyaXBlQ3VzdG9tZXJJZDoge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIGluZGV4OiB0cnVlLCAvLyBJbmRleCBpZiBsb29raW5nIHVwIHRlYW1zIGJ5IGN1c3RvbWVyIElEXG4gICAgICAgIHNwYXJzZTogdHJ1ZSAvLyBBbGxvdyBudWxsL3VuZGVmaW5lZCB2YWx1ZXMgaW4gdGhlIGluZGV4XG4gICAgfSxcbiAgICBzdHJpcGVTdWJzY3JpcHRpb25JZDoge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIGluZGV4OiB0cnVlLFxuICAgICAgICBzcGFyc2U6IHRydWVcbiAgICB9LFxuICAgIC8vIENvdWxkIGFkZCBvdGhlciBsaW1pdHMgaGVyZSBsYXRlciAoZS5nLiwgYXBpQ2FsbExpbWl0KVxufSwge1xuICAgIHRpbWVzdGFtcHM6IHRydWUgLy8gQXV0b21hdGljYWxseSBhZGQgY3JlYXRlZEF0IGFuZCB1cGRhdGVkQXRcbn0pO1xuXG4vLyAtLS0gSW5kZXhpbmcgLS0tXG5UZWFtU2NoZW1hLmluZGV4KHsgbmFtZTogMSB9KTtcbi8vIEVuc3VyZSBlZmZpY2llbnQgcXVlcnlpbmcgZm9yIG1lbWJlcnNcblRlYW1TY2hlbWEuaW5kZXgoeyBcIm1lbWJlcnMudXNlclwiOiAxIH0pO1xuVGVhbVNjaGVtYS5pbmRleCh7IHBsYW46IDEgfSk7IC8vIEluZGV4IHRoZSBwbGFuIGZpZWxkXG5cbi8vIC0tLSBQcmUtc2F2ZSBIb29rIC0tLVxuLy8gQXV0b21hdGljYWxseSBhZGQgdGhlIGNyZWF0b3IgYXMgdGhlIGluaXRpYWwgJ293bmVyJyBtZW1iZXIgd2hlbiBhIHRlYW0gaXMgY3JlYXRlZFxuVGVhbVNjaGVtYS5wcmUoJ3NhdmUnLCBmdW5jdGlvbihuZXh0KSB7XG4gICAgLy8gU2V0IGRlZmF1bHQgbWVtYmVyc1xuICAgIGlmICh0aGlzLmlzTmV3KSB7XG4gICAgICAgIGlmICghdGhpcy5tZW1iZXJzKSB7XG4gICAgICAgICAgICB0aGlzLm1lbWJlcnMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjcmVhdG9yRXhpc3RzID0gdGhpcy5tZW1iZXJzLnNvbWUobWVtYmVyID0+IG1lbWJlci51c2VyLmVxdWFscyh0aGlzLmNyZWF0b3IpKTtcbiAgICAgICAgaWYgKCFjcmVhdG9yRXhpc3RzKSB7XG4gICAgICAgICAgICB0aGlzLm1lbWJlcnMucHVzaCh7IHVzZXI6IHRoaXMuY3JlYXRvciwgcm9sZTogJ293bmVyJyB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNldCBkZWZhdWx0IHByb21wdExpbWl0IGJhc2VkIG9uIHBsYW4gaWYgbm90IGFscmVhZHkgc2V0IG9yIGlmIHBsYW4gY2hhbmdlc1xuICAgIGlmICh0aGlzLmlzTmV3IHx8IHRoaXMuaXNNb2RpZmllZCgncGxhbicpKSB7XG4gICAgICAgIGNvbnN0IGxpbWl0cyA9IFBMQU5fTElNSVRTW3RoaXMucGxhbl07XG4gICAgICAgIGlmIChsaW1pdHMpIHtcbiAgICAgICAgICAgIHRoaXMucHJvbXB0TGltaXQgPSBsaW1pdHMucHJvbXB0TGltaXQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBuZXh0KCk7XG59KTtcblxuXG4vLyAtLS0gTW9kZWwgQ3JlYXRpb24gLS0tXG4vLyBVc2UgJ1RlYW0nIGFzIHRoZSBtb2RlbCBuYW1lIGZvbGxvd2luZyBNb25nb29zZSBjb252ZW50aW9uXG5jb25zdCBUZWFtID0gbW9kZWxzLlRlYW0gfHwgbW9uZ29vc2UubW9kZWwoJ1RlYW0nLCBUZWFtU2NoZW1hKTtcblxuZXhwb3J0IGRlZmF1bHQgVGVhbTtcblxuLyoqXG4gKiBUZWFtIG1lbWJlciBzY2hlbWFcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFRlYW1NZW1iZXJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB1c2VySWQgLSBVc2VyIElEXG4gKiBAcHJvcGVydHkge3N0cmluZ30gcm9sZSAtIE1lbWJlciByb2xlIChvd25lciwgYWRtaW4sIG1lbWJlcilcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBqb2luZWRBdCAtIFRpbWVzdGFtcCB3aGVuIG1lbWJlciBqb2luZWRcbiAqL1xuXG4vLyBSZW1vdmVkIGhlbHBlciBmdW5jdGlvbnMgKHZhbGlkYXRlVGVhbSwgc2FuaXRpemVUZWFtLCBnZXRNZW1iZXJSb2xlLCBpc1RlYW1BZG1pbiwgaXNUZWFtTWVtYmVyKVxuLy8gVGhlc2UgaGF2ZSBiZWVuIG1vdmVkIHRvIGxpYi90ZWFtVXRpbHMuanMgdG8gYXZvaWQgaW5jbHVkaW5nIE1vbmdvb3NlIG1vZGVsIGNvZGUgaW4gdGhlIGNsaWVudCBidW5kbGUuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiU2NoZW1hIiwibW9kZWxzIiwiUExBTl9MSU1JVFMiLCJGcmVlIiwicHJvbXB0TGltaXQiLCJQcm8iLCJNZW1iZXJTY2hlbWEiLCJ1c2VyIiwidHlwZSIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJyZXF1aXJlZCIsInJvbGUiLCJTdHJpbmciLCJlbnVtIiwiZGVmYXVsdCIsImpvaW5lZEF0IiwiRGF0ZSIsIm5vdyIsIl9pZCIsIlRlYW1TY2hlbWEiLCJuYW1lIiwidHJpbSIsIm1heGxlbmd0aCIsImRlc2NyaXB0aW9uIiwiY3JlYXRvciIsIm1lbWJlcnMiLCJwbGFuIiwiT2JqZWN0Iiwia2V5cyIsIk51bWJlciIsInN0cmlwZUN1c3RvbWVySWQiLCJpbmRleCIsInNwYXJzZSIsInN0cmlwZVN1YnNjcmlwdGlvbklkIiwidGltZXN0YW1wcyIsInByZSIsIm5leHQiLCJpc05ldyIsImNyZWF0b3JFeGlzdHMiLCJzb21lIiwibWVtYmVyIiwiZXF1YWxzIiwicHVzaCIsImlzTW9kaWZpZWQiLCJsaW1pdHMiLCJUZWFtIiwibW9kZWwiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./models/team.js\n");

/***/ }),

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fteams%2F%5Bid%5D&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cteams%5C%5Bid%5D.js&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fteams%2F%5Bid%5D&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cteams%5C%5Bid%5D.js&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_teams_id_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\teams\\[id].js */ \"(api-node)/./pages/api/teams/[id].js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_teams_id_js__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_teams_id_js__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/teams/[id]\",\n        pathname: \"/api/teams/[id]\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_teams_id_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGdGVhbXMlMkYlNUJpZCU1RCZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDdGVhbXMlNUMlNUJpZCU1RC5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDRTtBQUMxRDtBQUN5RDtBQUN6RDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsbURBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLG1EQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLHlHQUFtQjtBQUNsRDtBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXHRlYW1zXFxcXFtpZF0uanNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgJ2RlZmF1bHQnKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsICdjb25maWcnKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3RlYW1zL1tpZF1cIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS90ZWFtcy9baWRdXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogJycsXG4gICAgICAgIGZpbGVuYW1lOiAnJ1xuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fteams%2F%5Bid%5D&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cteams%5C%5Bid%5D.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/teams/[id].js":
/*!*********************************!*\
  !*** ./pages/api/teams/[id].js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../lib/auth */ \"(api-node)/./lib/auth.js\");\n/* harmony import */ var _models_team__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../models/team */ \"(api-node)/./models/team.js\");\n/* harmony import */ var _lib_mongoose__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../lib/mongoose */ \"(api-node)/./lib/mongoose.js\");\n\n // Import Mongoose model\n // Import DB connector\n// Remove old db and model helper imports\n// import { getTeamById, updateTeam, deleteTeam } from '../../../lib/db';\n// import { validateTeam, isTeamAdmin, isTeamMember } from '../../../models/team';\n/**\n * API handler for operations on a specific team\n * \n * GET: Get a team by ID\n * PUT: Update a team\n * DELETE: Delete a team\n */ async function handler(req, res) {\n    const { method } = req;\n    const { id } = req.query;\n    if (!id) {\n        return res.status(400).json({\n            message: 'Team ID is required'\n        });\n    }\n    switch(method){\n        case 'GET':\n            return getTeamHandler(req, res, id);\n        case 'PUT':\n            return updateTeamHandler(req, res, id);\n        case 'DELETE':\n            return deleteTeamHandler(req, res, id);\n        default:\n            res.setHeader('Allow', [\n                'GET',\n                'PUT',\n                'DELETE'\n            ]);\n            return res.status(405).end(`Method ${method} Not Allowed`);\n    }\n}\n/**\n * Get a specific team by ID\n */ async function getTeamHandler(req, res, id) {\n    const sessionUserId = req.session?.sub;\n    if (!sessionUserId) {\n        // Should be caught by withAuth, but double-check\n        return res.status(401).json({\n            message: 'Authentication required'\n        });\n    }\n    try {\n        await (0,_lib_mongoose__WEBPACK_IMPORTED_MODULE_2__[\"default\"])();\n        const team = await _models_team__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findById(id).populate('creator', 'name email').populate('members.user', 'name email'); // Populate details\n        if (!team) {\n            return res.status(404).json({\n                message: 'Team not found'\n            });\n        }\n        // Authorization Check: User must be a member\n        const isMember = team.members.some((member)=>member.user._id.equals(sessionUserId));\n        if (!isMember) {\n            return res.status(403).json({\n                message: 'Not authorized to view this team'\n            });\n        }\n        return res.status(200).json(team);\n    } catch (error) {\n        console.error('Error fetching team:', error);\n        // Handle potential CastError if ID format is invalid\n        if (error.name === 'CastError') {\n            return res.status(400).json({\n                message: 'Invalid Team ID format'\n            });\n        }\n        return res.status(500).json({\n            message: 'Failed to fetch team'\n        });\n    }\n}\n/**\n * Update a team\n */ async function updateTeamHandler(req, res, id) {\n    const sessionUserId = req.session?.sub;\n    if (!sessionUserId) {\n        return res.status(401).json({\n            message: 'Authentication required'\n        });\n    }\n    try {\n        await (0,_lib_mongoose__WEBPACK_IMPORTED_MODULE_2__[\"default\"])();\n        const team = await _models_team__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findById(id); // Fetch without populate first for auth check\n        if (!team) {\n            return res.status(404).json({\n                message: 'Team not found'\n            });\n        }\n        // Authorization Check: User must be owner or admin\n        const member = team.members.find((m)=>m.user.equals(sessionUserId));\n        const isAdmin = member && (member.role === 'owner' || member.role === 'admin');\n        if (!isAdmin) {\n            return res.status(403).json({\n                message: 'Not authorized to update this team'\n            });\n        }\n        // Prepare update data - only allow specific fields (name, description)\n        const { name, description } = req.body;\n        const dataToUpdate = {};\n        if (name !== undefined) dataToUpdate.name = name;\n        if (description !== undefined) dataToUpdate.description = description;\n        if (Object.keys(dataToUpdate).length === 0) {\n            return res.status(400).json({\n                message: 'No update data provided'\n            });\n        }\n        // Update the team, run validators, and return the updated document\n        const updatedTeam = await _models_team__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findByIdAndUpdate(id, dataToUpdate, {\n            new: true,\n            runValidators: true\n        }).populate('creator', 'name email').populate('members.user', 'name email');\n        if (!updatedTeam) {\n            // Should not happen if findById found the team, but safeguard\n            return res.status(404).json({\n                message: 'Team not found after update attempt'\n            });\n        }\n        return res.status(200).json(updatedTeam);\n    } catch (error) {\n        console.error('Error updating team:', error);\n        if (error.name === 'ValidationError') {\n            const errors = Object.values(error.errors).map((el)=>el.message);\n            return res.status(400).json({\n                message: 'Validation failed',\n                errors\n            });\n        }\n        if (error.name === 'CastError') {\n            return res.status(400).json({\n                message: 'Invalid Team ID format'\n            });\n        }\n        return res.status(500).json({\n            message: 'Failed to update team'\n        });\n    }\n}\n/**\n * Delete a team\n */ async function deleteTeamHandler(req, res, id) {\n    const sessionUserId = req.session?.sub;\n    if (!sessionUserId) {\n        return res.status(401).json({\n            message: 'Authentication required'\n        });\n    }\n    try {\n        await (0,_lib_mongoose__WEBPACK_IMPORTED_MODULE_2__[\"default\"])();\n        const team = await _models_team__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findById(id); // Fetch first for auth check\n        if (!team) {\n            return res.status(404).json({\n                message: 'Team not found'\n            });\n        }\n        // Authorization Check: User must be owner or admin\n        const member = team.members.find((m)=>m.user.equals(sessionUserId));\n        const isAdmin = member && (member.role === 'owner' || member.role === 'admin');\n        if (!isAdmin) {\n            return res.status(403).json({\n                message: 'Not authorized to delete this team'\n            });\n        }\n        // TODO: Add logic here to handle prompts associated with this team\n        // Option 1: Prevent deletion if team has prompts\n        // Option 2: Delete associated prompts (potentially dangerous)\n        // Option 3: Unassign prompts (set teamId to null, maybe change visibility?)\n        console.warn(`WARNING: Deleting team ${id}. Associated prompts are not handled yet.`);\n        const deletedResult = await _models_team__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findByIdAndDelete(id);\n        if (!deletedResult) {\n            return res.status(404).json({\n                message: 'Team not found during deletion'\n            });\n        }\n        return res.status(200).json({\n            message: 'Team deleted successfully'\n        });\n    } catch (error) {\n        console.error('Error deleting team:', error);\n        if (error.name === 'CastError') {\n            return res.status(400).json({\n                message: 'Invalid Team ID format'\n            });\n        }\n        return res.status(500).json({\n            message: 'Failed to delete team'\n        });\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_lib_auth__WEBPACK_IMPORTED_MODULE_0__.withAuth)(handler));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cEQsTUFBTWtCLFVBQVVULFVBQVdBLENBQUFBLE9BQU9VLElBQUksS0FBSyxXQUFXVixPQUFPVSxJQUFJLEtBQUssT0FBTTtRQUU1RSxJQUFJLENBQUNELFNBQVM7WUFDWixPQUFPOUIsSUFBSUksTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsU0FBUztZQUFxQztRQUM5RTtRQUVBLG1FQUFtRTtRQUNuRSxpREFBaUQ7UUFDakQsOERBQThEO1FBQzlELDRFQUE0RTtRQUM1RW9CLFFBQVFxQixJQUFJLENBQUMsQ0FBQyx1QkFBdUIsRUFBRTdDLEdBQUcseUNBQXlDLENBQUM7UUFFcEYsTUFBTThDLGdCQUFnQixNQUFNcEQsc0VBQXNCLENBQUNNO1FBRW5ELElBQUksQ0FBQzhDLGVBQWU7WUFDZixPQUFPaEQsSUFBSUksTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsU0FBUztZQUFpQztRQUM3RTtRQUVBLE9BQU9OLElBQUlJLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsU0FBUztRQUE0QjtJQUNyRSxFQUFFLE9BQU9tQixPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyx3QkFBd0JBO1FBQ3JDLElBQUlBLE1BQU1FLElBQUksS0FBSyxhQUFhO1lBQy9CLE9BQU8zQixJQUFJSSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUFFQyxTQUFTO1lBQXlCO1FBQ2xFO1FBQ0EsT0FBT04sSUFBSUksTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFQyxTQUFTO1FBQXdCO0lBQ2pFO0FBQ0Y7QUFFQSxpRUFBZVgsbURBQVFBLENBQUNHLFFBQVFBLEVBQUMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYmF1ZGlcXE9uZURyaXZlXFxEZXNrdG9wXFxQcm9tcHRQcm9cXFByb21wdFByb1xccGFnZXNcXGFwaVxcdGVhbXNcXFtpZF0uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgd2l0aEF1dGggfSBmcm9tICcuLi8uLi8uLi9saWIvYXV0aCc7XG5pbXBvcnQgVGVhbSBmcm9tICcuLi8uLi8uLi9tb2RlbHMvdGVhbSc7IC8vIEltcG9ydCBNb25nb29zZSBtb2RlbFxuaW1wb3J0IGNvbm5lY3REQiBmcm9tICcuLi8uLi8uLi9saWIvbW9uZ29vc2UnOyAvLyBJbXBvcnQgREIgY29ubmVjdG9yXG4vLyBSZW1vdmUgb2xkIGRiIGFuZCBtb2RlbCBoZWxwZXIgaW1wb3J0c1xuLy8gaW1wb3J0IHsgZ2V0VGVhbUJ5SWQsIHVwZGF0ZVRlYW0sIGRlbGV0ZVRlYW0gfSBmcm9tICcuLi8uLi8uLi9saWIvZGInO1xuLy8gaW1wb3J0IHsgdmFsaWRhdGVUZWFtLCBpc1RlYW1BZG1pbiwgaXNUZWFtTWVtYmVyIH0gZnJvbSAnLi4vLi4vLi4vbW9kZWxzL3RlYW0nO1xuXG4vKipcbiAqIEFQSSBoYW5kbGVyIGZvciBvcGVyYXRpb25zIG9uIGEgc3BlY2lmaWMgdGVhbVxuICogXG4gKiBHRVQ6IEdldCBhIHRlYW0gYnkgSURcbiAqIFBVVDogVXBkYXRlIGEgdGVhbVxuICogREVMRVRFOiBEZWxldGUgYSB0ZWFtXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcbiAgY29uc3QgeyBtZXRob2QgfSA9IHJlcTtcbiAgY29uc3QgeyBpZCB9ID0gcmVxLnF1ZXJ5O1xuICBcbiAgaWYgKCFpZCkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdUZWFtIElEIGlzIHJlcXVpcmVkJyB9KTtcbiAgfVxuICBcbiAgc3dpdGNoIChtZXRob2QpIHtcbiAgICBjYXNlICdHRVQnOlxuICAgICAgcmV0dXJuIGdldFRlYW1IYW5kbGVyKHJlcSwgcmVzLCBpZCk7XG4gICAgY2FzZSAnUFVUJzpcbiAgICAgIHJldHVybiB1cGRhdGVUZWFtSGFuZGxlcihyZXEsIHJlcywgaWQpO1xuICAgIGNhc2UgJ0RFTEVURSc6XG4gICAgICByZXR1cm4gZGVsZXRlVGVhbUhhbmRsZXIocmVxLCByZXMsIGlkKTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmVzLnNldEhlYWRlcignQWxsb3cnLCBbJ0dFVCcsICdQVVQnLCAnREVMRVRFJ10pO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5lbmQoYE1ldGhvZCAke21ldGhvZH0gTm90IEFsbG93ZWRgKTtcbiAgfVxufVxuXG4vKipcbiAqIEdldCBhIHNwZWNpZmljIHRlYW0gYnkgSURcbiAqL1xuYXN5bmMgZnVuY3Rpb24gZ2V0VGVhbUhhbmRsZXIocmVxLCByZXMsIGlkKSB7XG4gIGNvbnN0IHNlc3Npb25Vc2VySWQgPSByZXEuc2Vzc2lvbj8uc3ViO1xuICBpZiAoIXNlc3Npb25Vc2VySWQpIHtcbiAgICAvLyBTaG91bGQgYmUgY2F1Z2h0IGJ5IHdpdGhBdXRoLCBidXQgZG91YmxlLWNoZWNrXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ0F1dGhlbnRpY2F0aW9uIHJlcXVpcmVkJyB9KTsgXG4gIH1cblxuICB0cnkge1xuICAgIGF3YWl0IGNvbm5lY3REQigpO1xuICAgIGNvbnN0IHRlYW0gPSBhd2FpdCBUZWFtLmZpbmRCeUlkKGlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBvcHVsYXRlKCdjcmVhdG9yJywgJ25hbWUgZW1haWwnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBvcHVsYXRlKCdtZW1iZXJzLnVzZXInLCAnbmFtZSBlbWFpbCcpOyAvLyBQb3B1bGF0ZSBkZXRhaWxzXG5cbiAgICBpZiAoIXRlYW0pIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdUZWFtIG5vdCBmb3VuZCcgfSk7XG4gICAgfVxuXG4gICAgLy8gQXV0aG9yaXphdGlvbiBDaGVjazogVXNlciBtdXN0IGJlIGEgbWVtYmVyXG4gICAgY29uc3QgaXNNZW1iZXIgPSB0ZWFtLm1lbWJlcnMuc29tZShtZW1iZXIgPT4gbWVtYmVyLnVzZXIuX2lkLmVxdWFscyhzZXNzaW9uVXNlcklkKSk7XG4gICAgaWYgKCFpc01lbWJlcikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgbWVzc2FnZTogJ05vdCBhdXRob3JpemVkIHRvIHZpZXcgdGhpcyB0ZWFtJyB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24odGVhbSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdGVhbTonLCBlcnJvcik7XG4gICAgLy8gSGFuZGxlIHBvdGVudGlhbCBDYXN0RXJyb3IgaWYgSUQgZm9ybWF0IGlzIGludmFsaWRcbiAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ0Nhc3RFcnJvcicpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdJbnZhbGlkIFRlYW0gSUQgZm9ybWF0JyB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0ZhaWxlZCB0byBmZXRjaCB0ZWFtJyB9KTtcbiAgfVxufVxuXG4vKipcbiAqIFVwZGF0ZSBhIHRlYW1cbiAqL1xuYXN5bmMgZnVuY3Rpb24gdXBkYXRlVGVhbUhhbmRsZXIocmVxLCByZXMsIGlkKSB7XG4gIGNvbnN0IHNlc3Npb25Vc2VySWQgPSByZXEuc2Vzc2lvbj8uc3ViO1xuICBpZiAoIXNlc3Npb25Vc2VySWQpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnQXV0aGVudGljYXRpb24gcmVxdWlyZWQnIH0pO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBhd2FpdCBjb25uZWN0REIoKTtcbiAgICBjb25zdCB0ZWFtID0gYXdhaXQgVGVhbS5maW5kQnlJZChpZCk7IC8vIEZldGNoIHdpdGhvdXQgcG9wdWxhdGUgZmlyc3QgZm9yIGF1dGggY2hlY2tcblxuICAgIGlmICghdGVhbSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1RlYW0gbm90IGZvdW5kJyB9KTtcbiAgICB9XG5cbiAgICAvLyBBdXRob3JpemF0aW9uIENoZWNrOiBVc2VyIG11c3QgYmUgb3duZXIgb3IgYWRtaW5cbiAgICBjb25zdCBtZW1iZXIgPSB0ZWFtLm1lbWJlcnMuZmluZChtID0+IG0udXNlci5lcXVhbHMoc2Vzc2lvblVzZXJJZCkpO1xuICAgIGNvbnN0IGlzQWRtaW4gPSBtZW1iZXIgJiYgKG1lbWJlci5yb2xlID09PSAnb3duZXInIHx8IG1lbWJlci5yb2xlID09PSAnYWRtaW4nKTtcblxuICAgIGlmICghaXNBZG1pbikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgbWVzc2FnZTogJ05vdCBhdXRob3JpemVkIHRvIHVwZGF0ZSB0aGlzIHRlYW0nIH0pO1xuICAgIH1cblxuICAgIC8vIFByZXBhcmUgdXBkYXRlIGRhdGEgLSBvbmx5IGFsbG93IHNwZWNpZmljIGZpZWxkcyAobmFtZSwgZGVzY3JpcHRpb24pXG4gICAgY29uc3QgeyBuYW1lLCBkZXNjcmlwdGlvbiB9ID0gcmVxLmJvZHk7XG4gICAgY29uc3QgZGF0YVRvVXBkYXRlID0ge307XG4gICAgaWYgKG5hbWUgIT09IHVuZGVmaW5lZCkgZGF0YVRvVXBkYXRlLm5hbWUgPSBuYW1lO1xuICAgIGlmIChkZXNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkKSBkYXRhVG9VcGRhdGUuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcblxuICAgIGlmIChPYmplY3Qua2V5cyhkYXRhVG9VcGRhdGUpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnTm8gdXBkYXRlIGRhdGEgcHJvdmlkZWQnIH0pO1xuICAgIH1cblxuICAgIC8vIFVwZGF0ZSB0aGUgdGVhbSwgcnVuIHZhbGlkYXRvcnMsIGFuZCByZXR1cm4gdGhlIHVwZGF0ZWQgZG9jdW1lbnRcbiAgICBjb25zdCB1cGRhdGVkVGVhbSA9IGF3YWl0IFRlYW0uZmluZEJ5SWRBbmRVcGRhdGUoaWQsIGRhdGFUb1VwZGF0ZSwge1xuICAgICAgbmV3OiB0cnVlLCAvLyBSZXR1cm4gdGhlIHVwZGF0ZWQgZG9jdW1lbnRcbiAgICAgIHJ1blZhbGlkYXRvcnM6IHRydWUsIC8vIEVuc3VyZSBzY2hlbWEgdmFsaWRhdGlvbiBydWxlcyBhcmUgYXBwbGllZFxuICAgIH0pXG4gICAgLnBvcHVsYXRlKCdjcmVhdG9yJywgJ25hbWUgZW1haWwnKVxuICAgIC5wb3B1bGF0ZSgnbWVtYmVycy51c2VyJywgJ25hbWUgZW1haWwnKTtcblxuICAgIGlmICghdXBkYXRlZFRlYW0pIHtcbiAgICAgIC8vIFNob3VsZCBub3QgaGFwcGVuIGlmIGZpbmRCeUlkIGZvdW5kIHRoZSB0ZWFtLCBidXQgc2FmZWd1YXJkXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnVGVhbSBub3QgZm91bmQgYWZ0ZXIgdXBkYXRlIGF0dGVtcHQnIH0pO1xuICAgIH1cblxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih1cGRhdGVkVGVhbSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgdGVhbTonLCBlcnJvcik7XG4gICAgaWYgKGVycm9yLm5hbWUgPT09ICdWYWxpZGF0aW9uRXJyb3InKSB7XG4gICAgICBjb25zdCBlcnJvcnMgPSBPYmplY3QudmFsdWVzKGVycm9yLmVycm9ycykubWFwKGVsID0+IGVsLm1lc3NhZ2UpO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ1ZhbGlkYXRpb24gZmFpbGVkJywgZXJyb3JzIH0pO1xuICAgIH0gXG4gICAgaWYgKGVycm9yLm5hbWUgPT09ICdDYXN0RXJyb3InKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnSW52YWxpZCBUZWFtIElEIGZvcm1hdCcgfSk7XG4gICAgfVxuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdGYWlsZWQgdG8gdXBkYXRlIHRlYW0nIH0pO1xuICB9XG59XG5cbi8qKlxuICogRGVsZXRlIGEgdGVhbVxuICovXG5hc3luYyBmdW5jdGlvbiBkZWxldGVUZWFtSGFuZGxlcihyZXEsIHJlcywgaWQpIHtcbiAgY29uc3Qgc2Vzc2lvblVzZXJJZCA9IHJlcS5zZXNzaW9uPy5zdWI7XG4gIGlmICghc2Vzc2lvblVzZXJJZCkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdBdXRoZW50aWNhdGlvbiByZXF1aXJlZCcgfSk7XG4gIH1cblxuICB0cnkge1xuICAgIGF3YWl0IGNvbm5lY3REQigpO1xuICAgIGNvbnN0IHRlYW0gPSBhd2FpdCBUZWFtLmZpbmRCeUlkKGlkKTsgLy8gRmV0Y2ggZmlyc3QgZm9yIGF1dGggY2hlY2tcblxuICAgIGlmICghdGVhbSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1RlYW0gbm90IGZvdW5kJyB9KTtcbiAgICB9XG5cbiAgICAvLyBBdXRob3JpemF0aW9uIENoZWNrOiBVc2VyIG11c3QgYmUgb3duZXIgb3IgYWRtaW5cbiAgICBjb25zdCBtZW1iZXIgPSB0ZWFtLm1lbWJlcnMuZmluZChtID0+IG0udXNlci5lcXVhbHMoc2Vzc2lvblVzZXJJZCkpO1xuICAgIGNvbnN0IGlzQWRtaW4gPSBtZW1iZXIgJiYgKG1lbWJlci5yb2xlID09PSAnb3duZXInIHx8IG1lbWJlci5yb2xlID09PSAnYWRtaW4nKTtcblxuICAgIGlmICghaXNBZG1pbikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgbWVzc2FnZTogJ05vdCBhdXRob3JpemVkIHRvIGRlbGV0ZSB0aGlzIHRlYW0nIH0pO1xuICAgIH1cblxuICAgIC8vIFRPRE86IEFkZCBsb2dpYyBoZXJlIHRvIGhhbmRsZSBwcm9tcHRzIGFzc29jaWF0ZWQgd2l0aCB0aGlzIHRlYW1cbiAgICAvLyBPcHRpb24gMTogUHJldmVudCBkZWxldGlvbiBpZiB0ZWFtIGhhcyBwcm9tcHRzXG4gICAgLy8gT3B0aW9uIDI6IERlbGV0ZSBhc3NvY2lhdGVkIHByb21wdHMgKHBvdGVudGlhbGx5IGRhbmdlcm91cylcbiAgICAvLyBPcHRpb24gMzogVW5hc3NpZ24gcHJvbXB0cyAoc2V0IHRlYW1JZCB0byBudWxsLCBtYXliZSBjaGFuZ2UgdmlzaWJpbGl0eT8pXG4gICAgY29uc29sZS53YXJuKGBXQVJOSU5HOiBEZWxldGluZyB0ZWFtICR7aWR9LiBBc3NvY2lhdGVkIHByb21wdHMgYXJlIG5vdCBoYW5kbGVkIHlldC5gKTtcblxuICAgIGNvbnN0IGRlbGV0ZWRSZXN1bHQgPSBhd2FpdCBUZWFtLmZpbmRCeUlkQW5kRGVsZXRlKGlkKTtcbiAgICBcbiAgICBpZiAoIWRlbGV0ZWRSZXN1bHQpIHtcbiAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdUZWFtIG5vdCBmb3VuZCBkdXJpbmcgZGVsZXRpb24nIH0pO1xuICAgIH1cblxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICdUZWFtIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5JyB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyB0ZWFtOicsIGVycm9yKTtcbiAgICAgaWYgKGVycm9yLm5hbWUgPT09ICdDYXN0RXJyb3InKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnSW52YWxpZCBUZWFtIElEIGZvcm1hdCcgfSk7XG4gICAgfVxuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdGYWlsZWQgdG8gZGVsZXRlIHRlYW0nIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHdpdGhBdXRoKGhhbmRsZXIpOyJdLCJuYW1lcyI6WyJ3aXRoQXV0aCIsIlRlYW0iLCJjb25uZWN0REIiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwiaWQiLCJxdWVyeSIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwiZ2V0VGVhbUhhbmRsZXIiLCJ1cGRhdGVUZWFtSGFuZGxlciIsImRlbGV0ZVRlYW1IYW5kbGVyIiwic2V0SGVhZGVyIiwiZW5kIiwic2Vzc2lvblVzZXJJZCIsInNlc3Npb24iLCJzdWIiLCJ0ZWFtIiwiZmluZEJ5SWQiLCJwb3B1bGF0ZSIsImlzTWVtYmVyIiwibWVtYmVycyIsInNvbWUiLCJtZW1iZXIiLCJ1c2VyIiwiX2lkIiwiZXF1YWxzIiwiZXJyb3IiLCJjb25zb2xlIiwibmFtZSIsImZpbmQiLCJtIiwiaXNBZG1pbiIsInJvbGUiLCJkZXNjcmlwdGlvbiIsImJvZHkiLCJkYXRhVG9VcGRhdGUiLCJ1bmRlZmluZWQiLCJPYmplY3QiLCJrZXlzIiwibGVuZ3RoIiwidXBkYXRlZFRlYW0iLCJmaW5kQnlJZEFuZFVwZGF0ZSIsIm5ldyIsInJ1blZhbGlkYXRvcnMiLCJlcnJvcnMiLCJ2YWx1ZXMiLCJtYXAiLCJlbCIsIndhcm4iLCJkZWxldGVkUmVzdWx0IiwiZmluZEJ5SWRBbmREZWxldGUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/teams/[id].js\n");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next-auth/jwt":
/*!********************************!*\
  !*** external "next-auth/jwt" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("next-auth/jwt");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fteams%2F%5Bid%5D&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cteams%5C%5Bid%5D.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();